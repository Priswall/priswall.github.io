<!DOCTYPE html>

<html>

<head>
  <meta charset="UTF-8">
  <meta name="description" content="An open-source diep.io clone made with HTML, JS, and CSS">
  <meta name="keywords" content="HTML,CSS,diepio,clone,diep.io,JS,opensource,open-source,JavaScript">
  <meta name="author" content="Priswall">
  <link rel="icon" href="https://raw.githubusercontent.com/Priswall/diepio-clone/master/icon.png"></link>
  <title>peip.io</title>
</head>

<body>
  <script src="https://www.gstatic.com/firebasejs/4.12.1/firebase.js"></script>
  <script>
    var configFFA = {
    			apiKey: "AIzaSyBV_Ym3Ri84Ezmsob-u1thlAmxytI3HCgM",
    			authDomain: "test-bb2e4.firebaseapp.com",
    			databaseURL: "https://test-bb2e4.firebaseio.com",
    			projectId: "test-bb2e4",
    			storageBucket: "test-bb2e4.appspot.com",
    			messagingSenderId: "178503576166"
    		};
          
            var configTeams = {
                apiKey: "AIzaSyBU7KcmaKGz46OKoiN3kMCtEhfaVossLLU",
                authDomain: "peipio-1.firebaseapp.com",
                databaseURL: "https://peipio-1.firebaseio.com",
                projectId: "peipio-1",
                storageBucket: "peipio-1.appspot.com",
                messagingSenderId: "138085039704"
            };
            firebase.initializeApp(configFFA);
  </script>
  <style>
    
            @import url('https://fonts.googleapis.com/css?family=Ubuntu');
    
    		html,
    		body,
    		canvas,
    		p {
    
    			margin: 0;
    			font-family: "Ubuntu";
    			padding: 0;
    			overflow: hidden;
    
    		}
  </style>
  <canvas id="canvas" width="800px" height="600px"></canvas>
  <form id="form" autocomplete="off" onsubmit="playGame(); return false;"></form>
  <script>
    var canvas = document.getElementById("canvas");
        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;
        var c = canvas.getContext("2d");
        c.lineCap = "round";
        var bgimg = new Image();
        bgimg.onload = function() {};
        bgimg.src = "https://raw.githubusercontent.com/Priswall/diepio-clone/master/background.png";
        var input = document.createElement("input");
        input.style.opacity = 0; 
        input.autofocus = true;
        input.style.fontFamily = "Ubuntu";
        input.style.position = "absolute";
        input.style.top = "50px";
        input.style.left = "50px";
        input.id="input";
        input.type="text";
        input.size= canvas.width / 30;
        input.maxLength="13";
      
        var start = 0;
        var gamemodes = ["FFA", "Teams"];
        var gamemode = 0;
        var op = 0;
        var s = "Menu";
        var mouseIsPressed = false;
        var canClick = true;
        var mouseUP = false;
        var mouseClicked = false;
        var autofire = false;
        var autospin = false;
        var tanks = [];
        var keys = [];
        var bullets = [];
        var shapes = [];
        var classes = ["Basic Tank", "Sniper", "Twin", "Flank Guard", "Machine Gun", "Assassin", "Overseer", "Predator", "Twin Flank", "Triple spread", "Quad Tank", "Triplet", "Octo Tank", "Flamethrower", "Manager", "Triple Twin", "Overlord", "Land-miner", "Trapper", "Mega Trapper", "Tri-trapper", "Destroyer", "Annihilator", "Gunner", "Triangle", "Booster"];

        var tankshow = [
                    function() {
                c.fillRect(-9, 0, 18, -50);
                c.beginPath();
                c.moveTo(-9, 0);
                c.lineTo(-9, -50);
                c.stroke();
                c.beginPath();
                c.moveTo(-9, -50);
                c.lineTo(9, -50);
                c.stroke();
                c.beginPath();
                c.moveTo(9, 0);
                c.lineTo(9, -50);
                c.stroke();
                    },
                    function() {
                c.fillRect(-9, 0, 18, -55);
                c.beginPath();
                c.moveTo(-9, 0);
                c.lineTo(-9, -55);
                c.stroke();
                c.beginPath();
                c.moveTo(-9, -55);
                c.lineTo(9, -55);
                c.stroke();
                c.beginPath();
                c.moveTo(9, 0);
                c.lineTo(9, -55);
                c.stroke();
                    },
                    function() {
                c.fillRect(3, 0, 20, -50);
                c.beginPath();
                c.moveTo(3, 0);
                c.lineTo(3, -50);
                c.stroke();
                c.beginPath();
                c.moveTo(3, -50);
                c.lineTo(24, -50);
                c.stroke();
                c.beginPath();
                c.moveTo(24, 0);
                c.lineTo(24, -50);
                c.stroke();

                c.fillRect(-24, 0, 20, -50);
                c.beginPath();
                c.moveTo(-24, 0);
                c.lineTo(-24, -50);
                c.stroke();
                c.beginPath();
                c.moveTo(-24, -50);
                c.lineTo(-3, -50);
                c.stroke();
                c.beginPath();
                c.moveTo(-3, -50);
                c.lineTo(-3, 0);
                c.stroke();
                    },
                    function() {
                c.fillRect(-9, 0, 18, -50);
                c.beginPath();
                c.moveTo(-9, 0);
                c.lineTo(-9, -50);
                c.stroke();
                c.beginPath();
                c.moveTo(-9, -50);
                c.lineTo(9, -50);
                c.stroke();
                c.beginPath();
                c.moveTo(9, 0);
                c.lineTo(9, -50);
                c.stroke();
                      
                c.fillRect(-9, 0, 18, 40);
                c.beginPath();
                c.moveTo(-9, 0);
                c.lineTo(-9, 40);
                c.stroke();
                c.beginPath();
                c.moveTo(-9, 40);
                c.lineTo(9, 40);
                c.stroke();
                c.beginPath();
                c.moveTo(9, 0);
                c.lineTo(9, 40);
                c.stroke();
                    },
                    function() {
                c.beginPath();
                c.moveTo(0, 0);
                c.lineTo(-20, -40);
                c.lineTo(20, -40);
                c.lineTo(0, 0);
                c.fill();

                c.beginPath();
                c.moveTo(-5, 0);
                c.lineTo(-20, -40);
                c.stroke();

                c.beginPath();
                c.lineTo(-20, -40);
                c.lineTo(20, -40);
                c.stroke();

                c.beginPath();
                c.lineTo(20, -40);
                c.lineTo(5, 0);
                c.stroke();
                    },
                    function() {
                c.fillRect(-9, 0, 18, -65);
                c.beginPath();
                c.moveTo(-9, 0);
                c.lineTo(-9, -65);
                c.stroke();
                c.beginPath();
                c.moveTo(-9, -65);
                c.lineTo(9, -65);
                c.stroke();
                c.beginPath();
                c.moveTo(9, 0);
                c.lineTo(9, -65);
                c.stroke();
                    },
                    function() {
                c.beginPath();
                c.moveTo(0, 0);
                c.lineTo(-35, -20);
                c.lineTo(-35, 20);
                c.lineTo(0, 10);
                c.fill();

                c.beginPath();
                c.moveTo(0, -5);
                c.lineTo(-35, -20);
                c.stroke();

                c.beginPath();
                c.lineTo(-35, -20);
                c.lineTo(-35, 20);
                c.stroke();

                c.beginPath();
                c.lineTo(-35, 20);
                c.lineTo(0, 5);
                c.stroke();
                      
                c.beginPath();
                c.moveTo(0, 10);
                c.lineTo(35, 20);
                c.lineTo(35, -20);
                c.lineTo(0, -5);
                c.fill();

                c.beginPath();
                c.moveTo(0, 10);
                c.lineTo(35, 20);
                c.stroke();

                c.beginPath();
                c.lineTo(35, 20);
                c.lineTo(35, -20);
                c.stroke();

                c.beginPath();
                c.lineTo(35, -20);
                c.lineTo(0, -5);
                c.stroke();
                    },
                    function() {
                c.fillRect(-9, 0, 18, -55);
                      
                c.beginPath();
                c.moveTo(-9, 0);
                c.lineTo(-9, -55);
                c.stroke();
                      
                c.beginPath();
                c.moveTo(-9, -55);
                c.lineTo(9, -55);
                c.stroke();
                      
                c.beginPath();
                c.moveTo(9, 0);
                c.lineTo(9, -55);
                c.stroke();
                      
                c.fillRect(-13, 0, 26, -48);
                      
                c.beginPath();
                c.moveTo(-13, 0);
                c.lineTo(-13, -48);
                c.stroke();
                      
                c.beginPath();
                c.moveTo(-13, -48);
                c.lineTo(13, -48);
                c.stroke();
                      
                c.beginPath();
                c.moveTo(13, 0);
                c.lineTo(13, -48);
                c.stroke();
                    },
                    function() {
                c.fillRect(3, 0, 20, -50);
                c.beginPath();
                c.moveTo(3, 0);
                c.lineTo(3, -50);
                c.stroke();
                c.beginPath();
                c.moveTo(3, -50);
                c.lineTo(24, -50);
                c.stroke();
                c.beginPath();
                c.moveTo(24, 0);
                c.lineTo(24, -50);
                c.stroke();

                c.fillRect(-24, 0, 20, -50);
                c.beginPath();
                c.moveTo(-24, 0);
                c.lineTo(-24, -50);
                c.stroke();
                c.beginPath();
                c.moveTo(-24, -50);
                c.lineTo(-3, -50);
                c.stroke();
                c.beginPath();
                c.moveTo(-3, -50);
                c.lineTo(-3, 0);
                c.stroke();
                      
                c.fillRect(3, 0, 20, 50);
                c.beginPath();
                c.moveTo(3, 0);
                c.lineTo(3, 50);
                c.stroke();
                c.beginPath();
                c.moveTo(3, 50);
                c.lineTo(24, 50);
                c.stroke();
                c.beginPath();
                c.moveTo(24, 0);
                c.lineTo(24, 50);
                c.stroke();

                c.fillRect(-24, 0, 20, 50);
                c.beginPath();
                c.moveTo(-24, 0);
                c.lineTo(-24, 50);
                c.stroke();
                c.beginPath();
                c.moveTo(-24, 50);
                c.lineTo(-3, 50);
                c.stroke();
                c.beginPath();
                c.moveTo(-3, 50);
                c.lineTo(-3, 0);
                c.stroke();
                    },
                    function() {
                c.fillRect(-10, 0, 18, -50);
                c.beginPath();
                c.moveTo(-10, 0);
                c.lineTo(-10, -50);
                c.stroke();
                c.beginPath();
                c.moveTo(-10, -50);
                c.lineTo(10, -50);
                c.stroke();
                c.beginPath();
                c.moveTo(10, 0);
                c.lineTo(10, -50);
                c.stroke();

                c.save();
                c.translate(-10, 0);
                c.rotate(0.75);
                c.fillRect(0, 0, 18, -55);
                c.beginPath();
                c.moveTo(0, 0);
                c.lineTo(0, -55);
                c.stroke();
                c.beginPath();
                c.moveTo(0, -55);
                c.lineTo(20, -55);
                c.stroke();
                c.beginPath();
                c.moveTo(20, 0);
                c.lineTo(20, -55);
                c.stroke();
                c.restore();
                      
                c.save();
                c.translate(-10, 0);
                c.rotate(-0.75);
                c.fillRect(-5, 0, 18, -40);
                c.beginPath();
                c.moveTo(-5, 0);
                c.lineTo(-5, -40);
                c.stroke();
                c.beginPath();
                c.moveTo(-5, -40);
                c.lineTo(15, -40);
                c.stroke();
                c.beginPath();
                c.moveTo(15, 0);
                c.lineTo(15, -40);
                c.stroke();
                c.restore();
                    },
                    function() {
                c.fillRect(-9, 0, 18, -50);
                c.beginPath();
                c.moveTo(-9, 0);
                c.lineTo(-9, -50);
                c.stroke();
                c.beginPath();
                c.moveTo(-9, -50);
                c.lineTo(9, -50);
                c.stroke();
                c.beginPath();
                c.moveTo(9, 0);
                c.lineTo(9, -50);
                c.stroke();
                      
                c.fillRect(9, 0, -18, 50);
                c.beginPath();
                c.moveTo(9, 0);
                c.lineTo(9, 50);
                c.stroke();
                c.beginPath();
                c.moveTo(9, 50);
                c.lineTo(-9, 50);
                c.stroke();
                c.beginPath();
                c.moveTo(-9, 0);
                c.lineTo(-9, 50);
                c.stroke();
                      
                c.fillRect(0, -9, -50, 18);
                c.beginPath();
                c.moveTo(0, -9);
                c.lineTo(-50, -9);
                c.stroke();
                c.beginPath();
                c.moveTo(-50, -9);
                c.lineTo(-50, 9);
                c.stroke();
                c.beginPath();
                c.moveTo(-50, 9);
                c.lineTo(0, 9);
                c.stroke();
                      
                c.fillRect(0, 9, 50, -18);
                c.beginPath();
                c.moveTo(0, 9);
                c.lineTo(50, 9);
                c.stroke();
                c.beginPath();
                c.moveTo(50, 9);
                c.lineTo(50, -9);
                c.stroke();
                c.beginPath();
                c.moveTo(50, -9);
                c.lineTo(0, -9);
                c.stroke();
                    },
                    function() {
                c.fillRect(3, 0, 20, -50);
                c.beginPath();
                c.moveTo(3, 0);
                c.lineTo(3, -50);
                c.stroke();
                c.beginPath();
                c.moveTo(3, -50);
                c.lineTo(24, -50);
                c.stroke();
                c.beginPath();
                c.moveTo(24, 0);
                c.lineTo(24, -50);
                c.stroke();

                c.fillRect(-24, 0, 20, -50);
                c.beginPath();
                c.moveTo(-24, 0);
                c.lineTo(-24, -50);
                c.stroke();
                c.beginPath();
                c.moveTo(-24, -50);
                c.lineTo(-3, -50);
                c.stroke();
                c.beginPath();
                c.moveTo(-3, -50);
                c.lineTo(-3, 0);
                c.stroke();
                      
                c.fillRect(-9, 0, 18, -55);
                c.beginPath();
                c.moveTo(-9, 0);
                c.lineTo(-9, -55);
                c.stroke();
                c.beginPath();
                c.moveTo(-9, -55);
                c.lineTo(9, -55);
                c.stroke();
                c.beginPath();
                c.moveTo(9, 0);
                c.lineTo(9, -55);
                c.stroke(); 
                    },
                    function() {
                c.fillRect(-9, 0, 18, -50);
                c.beginPath();
                c.moveTo(-9, 0);
                c.lineTo(-9, -50);
                c.stroke();
                c.beginPath();
                c.moveTo(-9, -50);
                c.lineTo(9, -50);
                c.stroke();
                c.beginPath();
                c.moveTo(9, 0);
                c.lineTo(9, -50);
                c.stroke();
                      
                c.fillRect(9, 0, -18, 50);
                c.beginPath();
                c.moveTo(9, 0);
                c.lineTo(9, 50);
                c.stroke();
                c.beginPath();
                c.moveTo(9, 50);
                c.lineTo(-9, 50);
                c.stroke();
                c.beginPath();
                c.moveTo(-9, 0);
                c.lineTo(-9, 50);
                c.stroke();
                      
                c.fillRect(0, -9, -50, 18);
                c.beginPath();
                c.moveTo(0, -9);
                c.lineTo(-50, -9);
                c.stroke();
                c.beginPath();
                c.moveTo(-50, -9);
                c.lineTo(-50, 9);
                c.stroke();
                c.beginPath();
                c.moveTo(-50, 9);
                c.lineTo(0, 9);
                c.stroke();
                      
                c.fillRect(0, 9, 50, -18);
                c.beginPath();
                c.moveTo(0, 9);
                c.lineTo(50, 9);
                c.stroke();
                c.beginPath();
                c.moveTo(50, 9);
                c.lineTo(50, -9);
                c.stroke();
                c.beginPath();
                c.moveTo(50, -9);
                c.lineTo(0, -9);
                c.stroke();
                      
                c.save();
                c.translate(0, 0);
                c.rotate(0.7854);
                      
                c.fillRect(-9, 0, 18, -50);
                c.beginPath();
                c.moveTo(-9, 0);
                c.lineTo(-9, -50);
                c.stroke();
                c.beginPath();
                c.moveTo(-9, -50);
                c.lineTo(9, -50);
                c.stroke();
                c.beginPath();
                c.moveTo(9, 0);
                c.lineTo(9, -50);
                c.stroke();
                      
                c.fillRect(9, 0, -18, 50);
                c.beginPath();
                c.moveTo(9, 0);
                c.lineTo(9, 50);
                c.stroke();
                c.beginPath();
                c.moveTo(9, 50);
                c.lineTo(-9, 50);
                c.stroke();
                c.beginPath();
                c.moveTo(-9, 0);
                c.lineTo(-9, 50);
                c.stroke();
                      
                c.fillRect(0, -9, -50, 18);
                c.beginPath();
                c.moveTo(0, -9);
                c.lineTo(-50, -9);
                c.stroke();
                c.beginPath();
                c.moveTo(-50, -9);
                c.lineTo(-50, 9);
                c.stroke();
                c.beginPath();
                c.moveTo(-50, 9);
                c.lineTo(0, 9);
                c.stroke();
                      
                c.fillRect(0, 9, 50, -18);
                c.beginPath();
                c.moveTo(0, 9);
                c.lineTo(50, 9);
                c.stroke();
                c.beginPath();
                c.moveTo(50, 9);
                c.lineTo(50, -9);
                c.stroke();
                c.beginPath();
                c.moveTo(50, -9);
                c.lineTo(0, -9);
                c.stroke();
                c.restore();
                    },
                    function() {
                c.fillRect(-3, -50, 6, 45);
                c.strokeRect(-3, -50, 6, 45);
                c.fillRect(-9, -47, 6, 45);
                c.strokeRect(-9, -47, 6, 45);
                c.fillRect(3, -47, 6, 45);
                c.strokeRect(3, -47, 6, 45);
                c.fillRect(-15, -44, 6, 45);
                c.strokeRect(-15, -44, 6, 45);
                c.fillRect(9, -44, 6, 45);
                c.strokeRect(9, -44, 6, 45);
                    },
                    function() {
                c.beginPath();
                c.moveTo(0, 0);
                c.lineTo(-20, -35);
                c.lineTo(20, -35);
                c.lineTo(0, 0);
                c.fill();

                c.beginPath();
                c.moveTo(-5, 0);
                c.lineTo(-20, -35);
                c.stroke();

                c.beginPath();
                c.lineTo(-20, -35);
                c.lineTo(20, -35);
                c.stroke();

                c.beginPath();
                c.lineTo(20, -35);
                c.lineTo(5, 0);
                c.stroke();
                    },
                    function() {
                c.fillRect(3, 0, 20, -50);
                c.beginPath();
                c.moveTo(3, 0);
                c.lineTo(3, -50);
                c.stroke();
                c.beginPath();
                c.moveTo(3, -50);
                c.lineTo(24, -50);
                c.stroke();
                c.beginPath();
                c.moveTo(24, 0);
                c.lineTo(24, -50);
                c.stroke();

                c.fillRect(-24, 0, 20, -50);
                c.beginPath();
                c.moveTo(-24, 0);
                c.lineTo(-24, -50);
                c.stroke();
                c.beginPath();
                c.moveTo(-24, -50);
                c.lineTo(-3, -50);
                c.stroke();
                c.beginPath();
                c.moveTo(-3, -50);
                c.lineTo(-3, 0);
                c.stroke();
                      
                c.save();
                c.translate(0, 0);
                c.rotate(2.095);
                      
                c.fillRect(3, 0, 20, -50);
                c.beginPath();
                c.moveTo(3, 0);
                c.lineTo(3, -50);
                c.stroke();
                c.beginPath();
                c.moveTo(3, -50);
                c.lineTo(24, -50);
                c.stroke();
                c.beginPath();
                c.moveTo(24, 0);
                c.lineTo(24, -50);
                c.stroke();

                c.fillRect(-24, 0, 20, -50);
                c.beginPath();
                c.moveTo(-24, 0);
                c.lineTo(-24, -50);
                c.stroke();
                c.beginPath();
                c.moveTo(-24, -50);
                c.lineTo(-3, -50);
                c.stroke();
                c.beginPath();
                c.moveTo(-3, -50);
                c.lineTo(-3, 0);
                c.stroke();
                      
                c.restore();
                      
                c.save();
                c.translate(0, 0);
                c.rotate(-2.095);
                      
                c.fillRect(3, 0, 20, -50);
                c.beginPath();
                c.moveTo(3, 0);
                c.lineTo(3, -50);
                c.stroke();
                c.beginPath();
                c.moveTo(3, -50);
                c.lineTo(24, -50);
                c.stroke();
                c.beginPath();
                c.moveTo(24, 0);
                c.lineTo(24, -50);
                c.stroke();

                c.fillRect(-24, 0, 20, -50);
                c.beginPath();
                c.moveTo(-24, 0);
                c.lineTo(-24, -50);
                c.stroke();
                c.beginPath();
                c.moveTo(-24, -50);
                c.lineTo(-3, -50);
                c.stroke();
                c.beginPath();
                c.moveTo(-3, -50);
                c.lineTo(-3, 0);
                c.stroke();
                      
                c.restore();
                    },
                    function() {
                c.beginPath();
                c.moveTo(0, 0);
                c.lineTo(-35, -20);
                c.lineTo(-35, 20);
                c.lineTo(0, 10);
                c.fill();

                c.beginPath();
                c.moveTo(0, -5);
                c.lineTo(-35, -20);
                c.stroke();

                c.beginPath();
                c.lineTo(-35, -20);
                c.lineTo(-35, 20);
                c.stroke();

                c.beginPath();
                c.lineTo(-35, 20);
                c.lineTo(0, 5);
                c.stroke();
                      
                c.beginPath();
                c.moveTo(0, 10);
                c.lineTo(35, 20);
                c.lineTo(35, -20);
                c.lineTo(0, -5);
                c.fill();

                c.beginPath();
                c.moveTo(0, 10);
                c.lineTo(35, 20);
                c.stroke();

                c.beginPath();
                c.lineTo(35, 20);
                c.lineTo(35, -20);
                c.stroke();

                c.beginPath();
                c.lineTo(35, -20);
                c.lineTo(0, -5);
                c.stroke();
                      
                c.save();
                c.translate(0, 0);
                c.rotate(1.57);
                      
                c.beginPath();
                c.moveTo(0, 0);
                c.lineTo(-35, -20);
                c.lineTo(-35, 20);
                c.lineTo(0, 10);
                c.fill();

                c.beginPath();
                c.moveTo(0, -5);
                c.lineTo(-35, -20);
                c.stroke();

                c.beginPath();
                c.lineTo(-35, -20);
                c.lineTo(-35, 20);
                c.stroke();

                c.beginPath();
                c.lineTo(-35, 20);
                c.lineTo(0, 5);
                c.stroke();
                      
                c.beginPath();
                c.moveTo(0, 10);
                c.lineTo(35, 20);
                c.lineTo(35, -20);
                c.lineTo(0, -5);
                c.fill();

                c.beginPath();
                c.moveTo(0, 10);
                c.lineTo(35, 20);
                c.stroke();

                c.beginPath();
                c.lineTo(35, 20);
                c.lineTo(35, -20);
                c.stroke();

                c.beginPath();
                c.lineTo(35, -20);
                c.lineTo(0, -5);
                c.stroke();
                      
                c.restore();
                    },
                    function () {
                
                c.rect(-15, -30, 30, 30);
                c.fill();
                c.stroke();
                
                c.rect(-20, -40, 40, 10);
                c.fill();
                c.stroke();
                
                    },
                    function () {
                
                c.rect(-10, -30, 20, 30);
                c.fill();
                c.stroke();
                
                c.beginPath();
                c.moveTo(-10, -30);
                c.lineTo(10, -30);
                c.lineTo(20, -35);
                c.lineTo(-20, -35);
                c.lineTo(-10, -30);
                c.fill();
                
                c.beginPath();
                c.moveTo(-10, -30);
                c.lineTo(10, -30);
                c.lineTo(15, -35);
                c.lineTo(-15, -35);
                c.lineTo(-10, -30);
                c.stroke();
                
                    },
                    function () {
                
                c.rect(-15, -30, 30, 30);
                c.fill();
                c.stroke();
                
                c.beginPath();
                c.moveTo(-15, -30);
                c.lineTo(15, -30);
                c.lineTo(25, -40);
                c.lineTo(-25, -40);
                c.lineTo(-15, -30);
                c.fill();
                
                c.beginPath();
                c.moveTo(-15, -30);
                c.lineTo(15, -30);
                c.lineTo(25, -40);
                c.lineTo(-25, -40);
                c.lineTo(-15, -30);
                c.stroke();
                
                    },
                    function () {
                
                c.rect(-10, -30, 20, 30);
                c.fill();
                c.stroke();
                
                c.beginPath();
                c.moveTo(-10, -30);
                c.lineTo(10, -30);
                c.lineTo(20, -35);
                c.lineTo(-20, -35);
                c.lineTo(-10, -30);
                c.fill();
                
                c.beginPath();
                c.moveTo(-10, -30);
                c.lineTo(10, -30);
                c.lineTo(15, -35);
                c.lineTo(-15, -35);
                c.lineTo(-10, -30);
                c.stroke();
                
                c.save();
                c.translate(0, 0);
                c.rotate(2.0944);
                
                c.rect(-10, -30, 20, 30);
                c.fill();
                c.stroke();
                      
                c.beginPath();
                c.moveTo(-10, -30);
                c.lineTo(10, -30);
                c.lineTo(20, -35);
                c.lineTo(-20, -35);
                c.lineTo(-10, -30);
                c.fill();
                
                c.beginPath();
                c.moveTo(-10, -30);
                c.lineTo(10, -30);
                c.lineTo(15, -35);
                c.lineTo(-15, -35);
                c.lineTo(-10, -30);
                c.stroke();
                c.restore();
                
                c.save();
                c.translate(0, 0);
                c.rotate(-2.0944);
                
                c.rect(-10, -30, 20, 30);
                c.fill();
                c.stroke();
                      
                c.beginPath();
                c.moveTo(-10, -30);
                c.lineTo(10, -30);
                c.lineTo(20, -35);
                c.lineTo(-20, -35);
                c.lineTo(-10, -30);
                c.fill();
                
                c.beginPath();
                c.moveTo(-10, -30);
                c.lineTo(10, -30);
                c.lineTo(15, -35);
                c.lineTo(-15, -35);
                c.lineTo(-10, -30);
                c.stroke();
                c.restore();
                
                    },
                    function() {
                c.fillRect(-20, 0, 40, -50);
                c.beginPath();
                c.moveTo(-20, 0);
                c.lineTo(-20, -50);
                c.stroke();
                c.beginPath();
                c.moveTo(-20, -50);
                c.lineTo(20, -50);
                c.stroke();
                c.beginPath();
                c.moveTo(20, 0);
                c.lineTo(20, -50);
                c.stroke();
                    },
                    function() {
                c.fillRect(-25, 0, 50, -50);
                c.beginPath();
                c.moveTo(-25, 0);
                c.lineTo(-25, -50);
                c.stroke();
                c.beginPath();
                c.moveTo(-25, -50);
                c.lineTo(25, -50);
                c.stroke();
                c.beginPath();
                c.moveTo(25, 0);
                c.lineTo(25, -50);
                c.stroke();
                    },
                    function() {
                      
                c.fillRect(-25, 0, 10, -40);
                c.fillRect(-12.5, 0, 10, -50);
                c.fillRect(2.5, 0, 10, -50);
                c.fillRect(15, 0, 10, -40);
                      
                c.beginPath();
                c.moveTo(-25, 0);
                c.lineTo(-25, -40);
                c.stroke();
                      
                c.beginPath();
                c.moveTo(-25, -40);
                c.lineTo(-15, -40);
                c.stroke();
                      
                c.beginPath();
                c.moveTo(-15, -40);
                c.lineTo(-15, 0);
                c.stroke();
                      
                c.beginPath();
                c.moveTo(-12.5, 0);
                c.lineTo(-12.5, -50);
                c.stroke();
                      
                c.beginPath();
                c.moveTo(-12.5, -50);
                c.lineTo(-2.5, -50);
                c.stroke();
                      
                c.beginPath();
                c.moveTo(-2.5, -50);
                c.lineTo(-2.5, 0);
                c.stroke();
                      
                c.beginPath();
                c.moveTo(12.5, 0);
                c.lineTo(12.5, -50);
                c.stroke();
                      
                c.beginPath();
                c.moveTo(12.5, -50);
                c.lineTo(2.5, -50);
                c.stroke();
                      
                c.beginPath();
                c.moveTo(2.5, -50);
                c.lineTo(2.5, 0);
                c.stroke();
                      
                c.beginPath();
                c.moveTo(25, 0);
                c.lineTo(25, -40);
                c.stroke();
                      
                c.beginPath();
                c.moveTo(25, -40);
                c.lineTo(15, -40);
                c.stroke();
                      
                c.beginPath();
                c.moveTo(15, -40);
                c.lineTo(15, 0);
                c.stroke();
                      
                    },
                    function() {
                c.fillRect(-9, 0, 18, -50);
                c.beginPath();
                c.moveTo(-9, 0);
                c.lineTo(-9, -50);
                c.stroke();
                c.beginPath();
                c.moveTo(-9, -50);
                c.lineTo(9, -50);
                c.stroke();
                c.beginPath();
                c.moveTo(9, 0);
                c.lineTo(9, -50);
                c.stroke();
                      
                c.save();
                c.rotate(0.5236);
                c.fillRect(-9, 0, 18, 40);
                c.beginPath();
                c.moveTo(-9, 0);
                c.lineTo(-9, 40);
                c.stroke();
                c.beginPath();
                c.moveTo(-9, 40);
                c.lineTo(9, 40);
                c.stroke();
                c.beginPath();
                c.moveTo(9, 0);
                c.lineTo(9, 40);
                c.stroke();
                c.restore();
                      
                c.save();
                c.rotate(-0.5236);
                c.fillRect(-9, 0, 18, 40);
                c.beginPath();
                c.moveTo(-9, 0);
                c.lineTo(-9, 40);
                c.stroke();
                c.beginPath();
                c.moveTo(-9, 40);
                c.lineTo(9, 40);
                c.stroke();
                c.beginPath();
                c.moveTo(9, 0);
                c.lineTo(9, 40);
                c.stroke();
                c.restore();
                    },
                    function() {
                c.fillRect(-9, 0, 18, -50);
                c.beginPath();
                c.moveTo(-9, 0);
                c.lineTo(-9, -50);
                c.stroke();
                c.beginPath();
                c.moveTo(-9, -50);
                c.lineTo(9, -50);
                c.stroke();
                c.beginPath();
                c.moveTo(9, 0);
                c.lineTo(9, -50);
                c.stroke();
                      
                c.save();
                c.rotate(0.4);
                c.fillRect(-9, 0, 18, 40);
                c.beginPath();
                c.moveTo(-9, 0);
                c.lineTo(-9, 40);
                c.stroke();
                c.beginPath();
                c.moveTo(-9, 40);
                c.lineTo(9, 40);
                c.stroke();
                c.beginPath();
                c.moveTo(9, 0);
                c.lineTo(9, 40);
                c.stroke();
                c.restore();
                      
                c.save();
                c.rotate(-0.4);
                c.fillRect(-9, 0, 18, 40);
                c.beginPath();
                c.moveTo(-9, 0);
                c.lineTo(-9, 40);
                c.stroke();
                c.beginPath();
                c.moveTo(-9, 40);
                c.lineTo(9, 40);
                c.stroke();
                c.beginPath();
                c.moveTo(9, 0);
                c.lineTo(9, 40);
                c.stroke();
                c.restore();
                      
                c.save();
                c.rotate(0.6);
                c.fillRect(-9, 0, 18, 40);
                c.beginPath();
                c.moveTo(-9, 0);
                c.lineTo(-9, 40);
                c.stroke();
                c.beginPath();
                c.moveTo(-9, 40);
                c.lineTo(9, 40);
                c.stroke();
                c.beginPath();
                c.moveTo(9, 0);
                c.lineTo(9, 40);
                c.stroke();
                c.restore();
                      
                c.save();
                c.rotate(-0.6);
                c.fillRect(-9, 0, 18, 40);
                c.beginPath();
                c.moveTo(-9, 0);
                c.lineTo(-9, 40);
                c.stroke();
                c.beginPath();
                c.moveTo(-9, 40);
                c.lineTo(9, 40);
                c.stroke();
                c.beginPath();
                c.moveTo(9, 0);
                c.lineTo(9, 40);
                c.stroke();
                c.restore();
                    }
                ];

        var xpamt = [
                    0,
                    0,
                    4,
                    13,
                    28,
                    50,
                    78,
                    113,
                    157,
                    211,
                    272,
                    350,
                    437,
                    536,
                    653,
                    784,
                    938,
                    1109,
                    1301,
                    1516,
                    1757,
                    2026,
                    2325,
                    2653,
                    3017,
                    3416,
                    3854,
                    4334,
                    4857,
                    5428,
                    6048,
                    6720,
                    7448,
                    8235,
                    9084,
                    9998,
                    10981,
                    12036,
                    13167,
                    14377,
                    15671,
                    17053,
                    18526,
                    20094,
                    21762,
                    23545,
                    25000,
                    25000,
                    25000,
                    25000,
                    25000,
                    25000,
                    25000,
                    25000,
                    25000,
                    25000,
                    25000,
                    25000,
                    25000,
                    25000,
                    25000
                ];

        var tankorder = [

                    [
                        2,
                        1,
                        4,
                        3
                    ],

                    [
                        5,
                        6,
                        7,
                        18
                    ],
          
                    [
                        8,
                        9,
                        10
                    ],
          
                    [
                        //24,
                        //25
                    ],
          
                    [
                        21,
                        23
                    ],
          
                    [
                    ],
          
                    [
                        16
                    ],
          
                    [
                    ],
          
                    [
                        15
                    ],
          
                    [
                        11
                    ],
          
                    [
                      
                        12
                      
                    ],
          
                    [
                    ],
          
                    [
                    ],
          
                    [
                    ],
          
                    [
                    ],
          
                    [
                    ],
          
                    [
                    ],
          
                    [
                    ],
          
                    [
                        19,
                        20,
                        17
                    ],
          
                    [
                    ],
          
                    [
                        22
                    ],
          
                    [
                    ],
          
                    [
                    ],
          
                    [
                        13
                    ],

                ];

        var tankstats = {

            basic: {
                knockback: 2,
                reload: 500,
                bspeed: 5,
                spread: 5
            },

            sniper: {
                knockback: 3,
                reload: 1000,
                bspeed: 5,
                spread: 2
            },

            twin: {
                knockback: 1,
                reload: 200,
                bspeed: 5,
                bdamage: 3,
                bpenetration: 3,
                spread: 3
            },

            flankguard: {
                knockback: 3,
                reload: 500,
                bspeed: 5,
                spread: 2
            },

            assassin: {
                knockback: 5,
                reload: 1500,
                bspeed: 8,
                spread: 1
            },

            predator: {
                knockback: 3,
                reload: 750,
                bspeed: 5,
                spread: 2
            },

            machinegun: {
                knockback: 3,
                reload: 150,
                bspeed: 5,
                spread: 10
            },

            flamethrower: {
                knockback: 1,
                reload: 0,
                bspeed: 4,
                spread: 20
            },

            overseer: {
                knockback: 2,
                reload: 2000,
                bspeed: 3,
                spread: 0
            },
          
            landminer: {
                knockback: 4,
                reload: 3000,
                bspeed: 3,
                spread: 2
            },
          
            trapper: {
                knockback: 2,
                reload: 750,
                bspeed: 2,
                spread: 3
            },
          
            destroyer: {
                knockback: 3,
                reload: 1500,
                bspeed: 2,
                spread: 2
            },
          
            annihilator: {
                knockback: 5,
                reload: 2000,
                bspeed: 3,
                spread: 1
            },
            
            gunner: {
                knockback: 1,
                reload: 250,
                bspeed: 4,
                spread: 0
            }

        };

        var camx = 0;
        var camy = 0;
        var mousex = 0;
        var mousey = 0;
        var mmousex = 0;
        var mmousey = 0;
        var millis = 0;
      
        document.getElementById("form").appendChild(input);

        function disappearInput() {
            if(op > 0) {
                op -= 30;
                c.save();
                var opp = (op + (Math.PI / 2)) / 1000;
                if(opp < 0) {
                    opp = 0;
                }
                c.globalAlpha = opp;
                c.drawImage(bgimg, (canvas.width / 2) - (bgimg.width / 2), (canvas.height / 2) - (bgimg.height / 2));
                c.restore();
                input.style.opacity = (op + (Math.PI / 2)) / 1000;
                input.style.border = "5px solid black";
                input.style.left = ((canvas.width / 2) - (input.size * 5)) + "px";
                input.style.top = ((canvas.height / 3) + (50 * Math.sin((op / 13) / 50))) + "px";
                requestAnimationFrame(disappearInput);
            } else {
              
                document.getElementById("form").removeChild(input);
                tanks.splice(1, 1);
              
            }
        }
      
        requestAnimationFrame(draw);

        function returnMenu() {
          
            if(op < 1000 && op > 0) {
                input.focus();
                if(document.getElementById("input") === null) {
                  document.getElementById("form").appendChild(input);
                }
                op ++;
                c.save();
                var opp = (op + (Math.PI / 2)) / 1000;
                if(opp > 1000) {
                    opp = 1000;
                }
                c.globalAlpha = opp;
                c.drawImage(bgimg, (canvas.width / 2) - (bgimg.width / 2), (canvas.height / 2) - (bgimg.height / 2));
                c.restore();
                input.style.opacity = op / 1000;
                input.style.border = "5px solid black";
                input.style.left = ((canvas.width / 2) - (input.size * 5)) + "px";
                input.style.top = ((canvas.height / 3) + (50 * Math.sin((op / 13) / 50))) + "px";
                requestAnimationFrame(returnMenu);
              
            } else if (op === 1000){
                firebase.database().ref(tanks[0].userID).remove()
                s = "Menu";
                tanks = [];
                shapes = [];
                bullets = [];
            } else if(op < 0) {
              
                op = 100;
              
            }
        }

        function playGame() {

            s = "FFA";

            disappearInput();
            var name = input.value;
            if(name === "") {
                name = "Unnamed Tank";
            }

            if(shapes.length === 0) {
                for(var i = 0; i < 100; i++) {

                    shapes.push(new shape(Math.round(Math.random() * 3000) - 1500, Math.round(Math.random() * 3000) - 1500, Math.round(Math.random() * 2)));

                }
            }
          
            tanks.unshift(new tank((Math.random() * 3000) - 1500, (Math.random() * 3000) - 1500, 0, 0, name, 0, 0, 0, Math.round(Math.random() * 1000)));

            firebase.database().ref(tanks[0].userID).onDisconnect().remove();

        }

        function shape(x, y, id) {

            this.x = x;
            this.y = y;
            if(this.x < 500 && this.x > -500 && this.y < 500 && this.y > -500) {
              
                this.id = 2
                
                if(Math.random() < 0.3) {
                  
                    this.id = 3;
                  
                }
              
            }
            this.s = 1;
            this.a = 1;
            this.cooldown = 500;
            this.timetill = 0;
            this.dead = false;
            this.id = id;
            this.dh = 0;
            this.r = (Math.random() / 30) - 0.015;
            this.velx = (Math.random() / 2) - 0.25;
            this.vely = (Math.random() / 2) - 0.25;
            switch(this.id) {
                case 0:
                    this.H = 5;
                    this.h = 5;
                    this.xp = 10;
                    break;

                case 1:
                    this.H = 15;
                    this.h = 15;
                    this.xp = 25;
                    break;

                case 2:
                    this.H = 30;
                    this.h = 30;
                    this.xp = 130;
                    break;

                case 3:
                    this.H = 1000;
                    this.h = 1000;
                    this.xp = 10000;
                    this.r = this.r / 5;
                    this.velx = 0;
                    this.vely = 0;
                    break;
            }
            this.rot = 0;
            this.pushx = 0;
            this.pushy = 0;
            this.acc = 0.1;

            this.update = function() {

                this.die();

                this.x -= this.velx;
                this.y -= this.vely;

                this.x -= this.pushx;
                this.y -= this.pushy;
                this.rot -= this.r;

                if(this.pushx > 0) {

                    this.pushx -= this.acc;

                }
                if(this.pushy > 0) {

                    this.pushy -= this.acc;

                }

                if(this.pushx < 0) {

                    this.pushx += this.acc;

                }
                if(this.pushy < 0) {

                    this.pushy += this.acc;

                }

                if(Math.abs(this.pushx) < this.acc) {
                    this.pushx = 0;
                }

                if(Math.abs(this.pushy) < this.acc) {
                    this.pushy = 0;
                }

                this.h -= this.dh / 2;
                this.dh /= 2;

                if(this.h <= 0) {
                    this.dead = true;
                }

                if(this.x < -1615) {
                    this.x = -1615;
                }
                if(this.y < -1700) {
                    this.y = -1700;
                }
                if(this.x > 1700) {
                    this.x = 1700;
                }
                if(this.y > 1700) {
                    this.y = 1700;
                }

                if(this.cooldown < 500) {
                    this.cooldown = millis - this.timetill;
                } else if(this.cooldown > 500) {
                    this.cooldown = 500;
                }

            };

            this.gothit = function(other) {

                switch(other.constructor.name) {

                    case "shape":
                        if(this.id !== 3){
                            var pr = Math.atan2(-(this.x - other.x), this.y - other.y);
                            this.pushx = Math.sin(pr) * 2;
                            this.pushy = Math.cos(pr + 3.1416) * 2;
                        }
                        break;

                    case "bullet":
                        if(!other.dead && this.cooldown >= 100) {
                            if(this.id !== 3 && (other.id !== 2 && other.id !== 3)){
                                this.pushx += (other.dx / other.mag) * (other.knockback / 5);
                                this.pushy += (other.dy / other.mag) * (other.knockback / 5);
                                this.dh += other.d;
                                this.cooldown = 0;
                                this.timetill = millis;
                            } else if(other.id === 2 || other.id === 3) {
                                this.pushx += (other.dx / other.mag) * other.knockback;
                                this.pushy += (other.dy / other.mag) * other.knockback;
                                this.dh += other.d;
                                this.cooldown = 0;
                                this.timetill = millis;
                            }
                            other.p--;
                            other.ms *= 0.8;
                        }
                        break;

                    case "tank":
                        if(!other.dead) {
                            var pr = Math.atan2(-(this.x - other.x), this.y - other.y);
                            if(this.id !== 3) {
                                this.pushx = Math.sin(pr);
                                this.pushy = Math.cos(pr + 3.1416);
                                other.velx = Math.sin(pr) / 2;
                                other.vely = Math.cos(pr + 3.1416) / 2;
                                this.dh += other.bodydamagepoints + 1;
                            }
                        }
                        break;

                }

            };

            this.die = function() {

                if(this.dead) {

                    this.a -= 0.1;
                    this.s += 0.1;

                }

            };

            this.show = function() {

                c.save();
                c.translate(this.x, this.y);
                c.rotate(this.rot);
                c.scale(this.s, this.s);

                switch(this.id) {

                    case 0:
                        c.fillStyle = "rgba(250, 250, 150," + this.a + ")";
                        c.strokeStyle = "rgba(200, 200, 100," + this.a + ")";

                        c.fillRect(-18, -18, 36, 36);

                        c.beginPath();
                        c.moveTo(-18, -18);
                        c.lineTo(18, -18);
                        c.stroke();

                        c.beginPath();
                        c.moveTo(18, -18);
                        c.lineTo(18, 18);
                        c.stroke();

                        c.beginPath();
                        c.moveTo(18, 18);
                        c.lineTo(-18, 18);
                        c.stroke();

                        c.beginPath();
                        c.moveTo(-18, 18);
                        c.lineTo(-18, -18);
                        c.stroke();
                        break;

                    case 1:
                        c.fillStyle = "rgba(250, 150, 150," + this.a + ")";
                        c.strokeStyle = "rgba(200, 100, 100," + this.a + ")";

                        c.beginPath();
                        c.moveTo(-20, 12);
                        c.lineTo(0, -23);
                        c.lineTo(20, 12);
                        c.fill();

                        c.beginPath();
                        c.moveTo(20, 12);
                        c.lineTo(0, -23);
                        c.stroke();

                        c.beginPath();
                        c.moveTo(0, -23);
                        c.lineTo(-20, 12);
                        c.stroke();

                        c.beginPath();
                        c.moveTo(-20, 12);
                        c.lineTo(20, 12);
                        c.stroke();
                        break;

                    case 2:
                        c.fillStyle = "rgba(150, 150, 250," + this.a + ")";
                        c.strokeStyle = "rgba(120, 120, 200," + this.a + ")";

                        c.beginPath();
                        c.moveTo(0, 30);
                        c.lineTo(29, 9);
                        c.lineTo(18, -24);
                        c.lineTo(-18, -24);
                        c.lineTo(-29, 9);
                        c.lineTo(0, 30);
                        c.fill();

                        c.beginPath();
                        c.moveTo(0, 30);
                        c.lineTo(29, 9);
                        c.stroke();

                        c.beginPath();
                        c.moveTo(29, 9);
                        c.lineTo(18, -24);
                        c.stroke();

                        c.beginPath();
                        c.moveTo(18, -24);
                        c.lineTo(-18, -24);
                        c.stroke();

                        c.beginPath();
                        c.moveTo(-18, -24);
                        c.lineTo(-29, 9);
                        c.stroke();

                        c.beginPath();
                        c.moveTo(-29, 9);
                        c.lineTo(0, 30);
                        c.stroke();
                        break;

                }

                c.restore();

                c.lineWidth = 8;
                c.strokeStyle = "rgb(150, 150, 150)";

                if(this.h < this.H && !this.dead) {
                    c.beginPath();
                    c.moveTo(this.x - 20, this.y + 30);
                    c.lineTo(this.x + 20, this.y + 30);
                    c.stroke();
                    c.lineWidth = 5;
                    c.strokeStyle = "rgb(150, 250, 150)";
                    c.beginPath();
                    c.moveTo(this.x - 20, this.y + 30);
                    c.lineTo((this.x - 20) + ((40 / this.H) * this.h), this.y + 30);
                    c.stroke();
                }

                c.lineWidth = 3;

            };

        }

        function bullet(x, y, dx, dy, r, id, t, s, d, p, k) {

            this.x = x;
            this.y = y;
            this.rot = 0;
            this.dead = false;
            this.a = 1;
            this.s = 1;
            this.dx = this.x - dx;
            this.dy = this.y - dy;
            this.mag = Math.sqrt(this.dx * this.dx + this.dy * this.dy);
            this.r = r;
            this.id = id;
            this.t = t;
            this.ms = s;
            this.d = d;
            this.p = p;
            this.knockback = k;

            this.update = function() {

                this.die();

                if(this.p <= 0) {
                    this.dead = true;
                }

                if(this.id !== 1) {
                  
                    this.x -= (this.dx / this.mag) * this.ms;
                    this.y -= (this.dy / this.mag) * this.ms;
                  
                    this.p -= 0.01;
                  
                } else {
                  
                  
                    if(mouseIsPressed || autofire){
                        if(Math.abs(this.x - (-camx + mousex)) > 10) {
                            this.x -= (this.dx / this.mag) * this.ms;
                        }

                        if(Math.abs(this.y - (-camy + mousey)) > 10) {
                            this.y -= (this.dy / this.mag) * this.ms;
                        }

                        this.dx = this.x - (-camx + mousex);
                        this.dy = this.y - (-camy + mousey);
                        this.mag = Math.sqrt(this.dx * this.dx + this.dy * this.dy);

                        if(this.x < -1615) {
                            this.x = -1615;
                        }
                        if(this.y < -1700) {
                            this.y = -1700;
                        }
                        if(this.x > 1700) {
                            this.x = 1700;
                        }
                        if(this.y > 1700) {
                            this.y = 1700;
                        }

                        this.rot = Math.atan2(-(this.x - (mousex - camx)), (this.y - (mousey - camy)));
                    } else {
                        if(Math.abs(this.x - (-camx + (canvas.width / 2) + Math.sin(millis / 3000) * 75)) > 10) {
                            this.x -= (this.dx / this.mag) * (Math.abs(this.x - (-camx + (canvas.width / 2) + Math.sin(millis / 3000) * 75)) / 20);
                        }

                        if(Math.abs(this.y - (-camy + (canvas.width / 2) + Math.cos(millis / 3000) * 75)) > 10) {
                            this.y -= (this.dy / this.mag) * (Math.abs(this.y - (-camy + (canvas.height / 2) + Math.cos(millis / 3000) * 75)) / 20);
                        }

                        this.dx = this.x - (-camx + (canvas.width / 2) + Math.sin(millis / 3000) * 75);
                        this.dy = this.y - (-camy + (canvas.height / 2) + Math.cos(millis / 3000) * 75);
                        this.mag = Math.sqrt(this.dx * this.dx + this.dy * this.dy);

                        if(this.x < -1615) {
                            this.x = -1615;
                        }
                        if(this.y < -1700) {
                            this.y = -1700;
                        }
                        if(this.x > 1700) {
                            this.x = 1700;
                        }
                        if(this.y > 1700) {
                            this.y = 1700;
                        }

                        this.rot = Math.atan2(-(this.x - ((canvas.width / 2) + Math.sin(millis / 3000) * 75 - camx)), (this.y - ((canvas.width / 2) + Math.cos(millis / 3000) * 75 - camy)));
                    }

                }
                if(this.id === 2 || this.id === 3) {
                  
                    this.ms -= 0.1;
                  
                }
                if(this.ms < 0) {
                  
                    this.ms = 0;
                  
                }
            };

            this.die = function() {

                if(this.dead) {

                    this.a -= 0.1;
                    this.s += 0.1;

                }

            };

            this.show = function() {

                c.beginPath();

                switch(this.id) {

                    case 0:

                        c.save();
                        c.translate(this.x, this.y);
                        c.lineWidth = 3;
                        switch(this.t) {
                            case 0:
                                c.fillStyle = "rgb(100, 200, 250," + this.a + ")";
                                c.strokeStyle = "rgb(50, 150, 200," + this.a + ")";
                                break;
                            case 1:
                                c.fillStyle = "rgb(250, 150, 150," + this.a + ")";
                                c.strokeStyle = "rgb(200, 100, 100," + this.a + ")";
                                break;
                            case 2:
                                c.fillStyle = "rgb(150, 250, 150," + this.a + ")";
                                c.strokeStyle = "rgb(100, 200, 100," + this.a + ")";
                                break;
                            case 3:
                                c.fillStyle = "rgb(250, 150, 250," + this.a + ")";
                                c.strokeStyle = "rgb(200, 100, 200," + this.a + ")";
                                break;
                        }
                        c.arc(0, 0, this.r + this.s, 0, 2 * Math.PI);
                        c.fill();
                        c.stroke();

                        c.restore();
                        break;


                    case 1:

                        c.save();
                        c.translate(this.x, this.y);
                        c.rotate(this.rot);
                        c.lineWidth = 3;
                        switch(this.t) {
                            case 0:
                                c.fillStyle = "rgb(100, 200, 250," + this.a + ")";
                                c.strokeStyle = "rgb(50, 150, 200," + this.a + ")";
                                break;
                            case 1:
                                c.fillStyle = "rgb(250, 150, 150," + this.a + ")";
                                c.strokeStyle = "rgb(200, 100, 100," + this.a + ")";
                                break;
                            case 2:
                                c.fillStyle = "rgb(150, 250, 150," + this.a + ")";
                                c.strokeStyle = "rgb(100, 200, 100," + this.a + ")";
                                break;
                            case 3:
                                c.fillStyle = "rgb(250, 150, 250," + this.a + ")";
                                c.strokeStyle = "rgb(200, 100, 200," + this.a + ")";
                                break;
                        }
                        c.moveTo(0, -6);
                        c.lineTo(12, 13);
                        c.lineTo(-12, 13);
                        c.fill();

                        c.beginPath();
                        c.moveTo(0, -6);
                        c.lineTo(12, 13);
                        c.stroke();
                        c.beginPath();
                        c.lineTo(12, 13);
                        c.lineTo(-12, 13);
                        c.stroke();
                        c.beginPath();
                        c.lineTo(-12, 13);
                        c.lineTo(0, -6);
                        c.stroke();

                        c.restore();
                        break;
                    
                  case 2:
                  case 3:
                    
                      c.save();
                      c.translate(this.x, this.y);
                      c.rotate(this.rot);
                      c.lineWidth = 3;
                      c.scale(this.r, this.r);
                      switch(this.t) {
                          case 0:
                              c.fillStyle = "rgb(100, 200, 250," + this.a + ")";
                              c.strokeStyle = "rgb(50, 150, 200," + this.a + ")";
                              break;
                          case 1:
                              c.fillStyle = "rgb(250, 150, 150," + this.a + ")";
                              c.strokeStyle = "rgb(200, 100, 100," + this.a + ")";
                              break;
                          case 2:
                              c.fillStyle = "rgb(150, 250, 150," + this.a + ")";
                              c.strokeStyle = "rgb(100, 200, 100," + this.a + ")";
                              break;
                          case 3:
                              c.fillStyle = "rgb(250, 150, 250," + this.a + ")";
                              c.strokeStyle = "rgb(200, 100, 200," + this.a + ")";
                              break;
                      }
                    
                      c.beginPath();
                      c.moveTo(0, -30);
                      c.lineTo(12.5, -2.5);
                      c.lineTo(30, 20);
                      c.lineTo(0, 15);
                      c.lineTo(-30, 20);
                      c.lineTo(-12.5, -2.5);
                      c.lineTo(0, -30);
                      c.fill();
                    
                      c.beginPath();
                      c.moveTo(0, -30);
                      c.lineTo(12.5, -2.5);
                      c.stroke();
                    
                      c.beginPath();
                      c.moveTo(12.5, -2.5);
                      c.lineTo(30, 20);
                      c.stroke();
                    
                      c.beginPath();
                      c.moveTo(30, 20);
                      c.lineTo(0, 15);
                      c.stroke();
                    
                      c.beginPath();
                      c.moveTo(0, 15);
                      c.lineTo(-30, 20);
                      c.stroke();
                    
                      c.beginPath();
                      c.moveTo(-30, 20);
                      c.lineTo(-12.5, -2.5);
                      c.stroke();
                    
                      c.beginPath();
                      c.moveTo(-12.5, -2.5);
                      c.lineTo(0, -30);
                      c.stroke();
                    
                      c.restore();
                      break;

                }

            };

        }

        function tank(x, y, r, t, n, xp, lvl, id, userID) {
            this.x = x;
            this.y = y;
            this.a = 1;
            this.ss = 1;
            this.dr = 0;
            this.barrel = 0;
            this.showxp = 0;
            this.xppoints = 50;
            this.dead = false;
            this.velx = 0;
            this.vely = 0;
            this.acc = 0.075;
            this.knockback = tankstats.basic.knockback;
            this.spread = tankstats.basic.spread;
            this.bulletS = tankstats.basic.bspeed;
            this.reload = tankstats.basic.reload;
            this.bulletP = 1;
            this.bulletD = 3;
            this.maxSpeed = 3;
            this.BulletS = tankstats.basic.bspeed;
            this.BulletP = 1;
            this.BulletD = 3;
            this.MaxSpeed = 3;
            this.Reload = tankstats.basic.reload;
            this.healthpoints = 0;
            this.regenpoints = 0;
            this.bodydamagepoints = 0;
            this.bulletSpoints = 0;
            this.bulletPpoints = 0;
            this.bulletDpoints = 0;
            this.reloadpoints = 0;
            this.movementspeedpoints = 0;
            this.H = 20;
            this.h = 20;
            this.r = r;
            this.t = t;
            this.n = n;
            this.xp = xp;
            this.lvl = 50;
            this.id = id;
            this.userID = userID;
            this.reloading = false;
            this.cooldown = this.reload;
            this.timetill = 0;
          
            this.die = function() {
              
                if(this.dead) {
                  
                    this.a -= 0.05;
                    this.ss+=0.05;
                  
                }
              
                if(this.a < 0) {
                  
                    this.a = 0;
                  
                }
              
            }

            this.update = function(r) {
              
                if(this.h <= 0) {
                    this.dead = true;
                }
                this.die();

                this.bulletS = this.BulletS + Math.round((this.BulletS / 16) * this.bulletSpoints);
                this.bulletD = this.BulletD + Math.round(this.bulletDpoints * 5);
                this.bulletP = this.BulletP + Math.round(this.bulletPpoints);
                this.reload = this.Reload - ((this.Reload / 16) * this.reloadpoints);
                this.maxSpeed = this.MaxSpeed + ((this.MaxSpeed / 16) * this.movementspeedpoints);

                this.r = r;

                if(keys[87] && !keys[83]) {
                    this.vely -= this.acc;
                }
                if(keys[83] && !keys[87]) {
                    this.vely += this.acc;
                }
                if(keys[65] && !keys[68]) {
                    this.velx -= this.acc;
                }
                if(keys[68] && !keys[65]) {
                    this.velx += this.acc;
                }

                if(this.velx > this.maxSpeed) {
                    this.velx = this.maxSpeed;
                }
                if(this.velx < -this.maxSpeed) {
                    this.velx = -this.maxSpeed;
                }
                if(this.vely > this.maxSpeed) {
                    this.vely = this.maxSpeed;
                }
                if(this.vely < -this.maxSpeed) {
                    this.vely = -this.maxSpeed;
                }

                if(this.x < -1615) {
                    this.x = -1615;
                    this.velx = 0;
                }
                if(this.y < -1700) {
                    this.y = -1700;
                    this.vely = 0;
                }
                if(this.x > 1700) {
                    this.x = 1700;
                    this.velx = 0;
                }
                if(this.y > 1700) {
                    this.y = 1700;
                    this.vely = 0;
                }

                if(!keys[87] && !keys[83]) {
                    if(this.vely < 0) {
                        this.vely += this.acc;
                    }
                    if(this.vely > 0) {
                        this.vely -= this.acc;
                    }

                    if(Math.abs(this.vely) <= this.acc) {
                        this.vely = 0;
                    }
                }
                if(!keys[65] && !keys[68]) {
                    if(this.velx < 0) {
                        this.velx += this.acc;
                    }
                    if(this.velx > 0) {
                        this.velx -= this.acc;
                    }

                    if(Math.abs(this.velx) < this.acc) {
                        this.velx = 0;
                    }
                }

                this.x += this.velx;
                this.y += this.vely;

                if(mouseIsPressed || keys[32] || autofire) {

                    if(this.cooldown === this.reload && !this.reloading) {

                        switch(this.id) {

                            case 0:
                            case 1:
                            case 5:
                                bullets.push(new bullet(this.x + Math.sin(this.r) * 50, this.y - Math.cos(this.r) * 50, (this.x + Math.sin(this.r) * 70) - ((Math.random() * this.spread) - (this.spread / 2)), (this.y - Math.cos(this.r) * 70) - ((Math.random() * this.spread) - (this.spread / 2)), 10, 0, this.t, this.bulletS, this.bulletD, this.bulletP, this.knockback));
                                this.reloading = true;

                                this.dx = Math.sin(this.r);
                                this.dy = -Math.cos(this.r);
                                this.mag = Math.sqrt(this.dx * this.dx + this.dy * this.dy);

                                this.velx -= ((this.dx / this.mag) * (this.knockback / 2));
                                this.vely -= ((this.dy / this.mag) * (this.knockback / 2));

                                break;

                            case 2:
                                if(!this.bullet) {
                                    bullets.push(new bullet(this.x + Math.sin(this.r + 0.29) * 50, this.y - Math.cos(this.r + 0.29) * 50, (this.x + Math.sin(this.r + 0.205) * 70) - ((Math.random() * this.spread) - (this.spread / 2)), (this.y - Math.cos(this.r + 0.205) * 70) - ((Math.random() * this.spread) - (this.spread / 2)), 10, 0, this.t, this.bulletS, this.bulletD, this.bulletP, this.knockback));
                                    this.bullet = 1;
                                } else {
                                    bullets.push(new bullet(this.x + Math.sin(this.r - 0.29) * 50, this.y - Math.cos(this.r - 0.29) * 50, (this.x + Math.sin(this.r - 0.205) * 70) - ((Math.random() * this.spread) - (this.spread / 2)), (this.y - Math.cos(this.r - 0.205) * 70) - ((Math.random() * this.spread) - (this.spread / 2)), 10, 0, this.t, this.bulletS, this.bulletD, this.bulletP, this.knockback));
                                    this.bullet = 0;
                                }
                                this.reloading = true;

                                this.dx = Math.sin(this.r);
                                this.dy = -Math.cos(this.r);
                                this.mag = Math.sqrt(this.dx * this.dx + this.dy * this.dy);

                                this.velx -= ((this.dx / this.mag) * (this.knockback / 2));
                                this.vely -= ((this.dy / this.mag) * (this.knockback / 2));

                                break;

                            case 3:
                                bullets.push(new bullet(this.x + Math.sin(this.r) * 50, this.y - Math.cos(this.r) * 50, this.x + Math.sin(this.r) * 70, this.y - Math.cos(this.r) * 70, 10, 0, this.t, this.bulletS, this.bulletD, this.bulletP, this.knockback));
                                bullets.push(new bullet(this.x + Math.sin(this.r + (180 * (Math.PI / 180))) * 40, this.y - Math.cos(this.r + (180 * (Math.PI / 180))) * 40, this.x + Math.sin(this.r + (180 * (Math.PI / 180))) * 70, this.y - Math.cos(this.r + (180 * (Math.PI / 180))) * 70, 10, 0, this.t, this.bulletS, this.bulletD, this.bulletP, this.knockback));
                                this.reloading = true;
                                break;

                            case 4:
                                bullets.push(new bullet(this.x + Math.sin(this.r) * 40, this.y - Math.cos(this.r) * 40, (this.x + Math.sin(this.r) * 50) - ((Math.random() * this.spread) - (this.spread / 2)), (this.y - Math.cos(this.r) * 50) - ((Math.random() * this.spread) - (this.spread / 2)), 10, 0, this.t, this.bulletS, this.bulletD, this.bulletP, this.knockback));
                                this.reloading = true;

                                this.dx = Math.sin(this.r);
                                this.dy = -Math.cos(this.r);
                                this.mag = Math.sqrt(this.dx * this.dx + this.dy * this.dy);

                                this.velx -= ((this.dx / this.mag) * (this.knockback / 2));
                                this.vely -= ((this.dy / this.mag) * (this.knockback / 2));

                                break;

                            case 6:
                                if(this.dr < 8) {
                                    bullets.push(new bullet(this.x + Math.sin(this.r - 1.57) * 30, this.y - Math.cos(this.r - 1.57) * 30, mousex, mousey, 10, 1, this.t, this.bulletS, this.bulletD, this.bulletP, this.knockback));
                                    bullets.push(new bullet(this.x + Math.sin(this.r + 1.57) * 30, this.y - Math.cos(this.r + 1.57) * 30, mousex, mousey, 10, 1, this.t, this.bulletS, this.bulletD, this.bulletP, this.knockback));
                                    this.dr += 2;
                                    this.reloading = true;
                                }
                                if(this.dr > 8) {
                                  
                                    this.dr -= this.dr - 7;
                                    bullets.length = 8;
                                  
                                }
                                break;

                            case 7:
                                bullets.push(new bullet(this.x + Math.sin(this.r) * 50, this.y - Math.cos(this.r) * 50, this.x + Math.sin(this.r) * 70, this.y - Math.cos(this.r) * 70, 12, 0, this.t, this.bulletS * 0.9, this.bulletD, this.bulletP, this.knockback));
                                bullets.push(new bullet(this.x + Math.sin(this.r) * 50, this.y - Math.cos(this.r) * 50, this.x + Math.sin(this.r) * 70, this.y - Math.cos(this.r) * 70, 8, 0, this.t, this.bulletS, this.bulletD, this.bulletP, this.knockback));
                                this.reloading = true;
                                break;

                            
                            case 8:
                                if(!this.bullet) {
                                    bullets.push(new bullet(this.x + Math.sin(this.r + 0.29) * 50, this.y - Math.cos(this.r + 0.29) * 50, (this.x + Math.sin(this.r + 0.205) * 70) - ((Math.random() * this.spread) - (this.spread / 2)), (this.y - Math.cos(this.r + 0.205) * 70) - ((Math.random() * this.spread) - (this.spread / 2)), 10, 0, this.t, this.bulletS, this.bulletD, this.bulletP, this.knockback));
                                    bullets.push(new bullet(this.x + Math.sin(this.r + 3.4316) * 50, this.y - Math.cos(this.r + 3.4316) * 50, (this.x + Math.sin(this.r + 3.3466) * 70) - ((Math.random() * this.spread) - (this.spread / 2)), (this.y - Math.cos(this.r + 3.3466) * 70) - ((Math.random() * this.spread) - (this.spread / 2)), 10, 0, this.t, this.bulletS, this.bulletD, this.bulletP, this.knockback));
                                    this.bullet = 1;
                                } else {
                                    bullets.push(new bullet(this.x + Math.sin(this.r - 3.4316) * 50, this.y - Math.cos(this.r - 3.4316) * 50, (this.x + Math.sin(this.r - 3.3466) * 70) - ((Math.random() * this.spread) - (this.spread / 2)), (this.y - Math.cos(this.r - 3.3466) * 70) - ((Math.random() * this.spread) - (this.spread / 2)), 10, 0, this.t, this.bulletS, this.bulletD, this.bulletP, this.knockback));
                                    bullets.push(new bullet(this.x + Math.sin(this.r - 0.29) * 50, this.y - Math.cos(this.r - 0.29) * 50, (this.x + Math.sin(this.r - 0.205) * 70) - ((Math.random() * this.spread) - (this.spread / 2)), (this.y - Math.cos(this.r - 0.205) * 70) - ((Math.random() * this.spread) - (this.spread / 2)), 10, 0, this.t, this.bulletS, this.bulletD, this.bulletP, this.knockback));
                                    this.bullet = 0;
                                }
                                this.reloading = true;
                                break;

                            case 9:
                                switch(this.bullet) {
                                    
                                    case 0:
                                    
                                        bullets.push(new bullet(this.x + Math.sin(this.r) * 50, this.y - Math.cos(this.r) * 50, (this.x + Math.sin(this.r) * 70) - ((Math.random() * this.spread) - (this.spread / 2)), (this.y - Math.cos(this.r) * 70) - ((Math.random() * this.spread) - (this.spread / 2)), 10, 0, this.t, this.bulletS, this.bulletD, this.bulletP, this.knockback));
                                        this.reloading = true;
                                        this.bullet = 1;
                                        break;
                                    
                                    case 1:
                                        bullets.push(new bullet(this.x + Math.sin(this.r + 0.78534) * 50, this.y - Math.cos(this.r + 0.78534) * 50, (this.x + Math.sin(this.r + 0.78534) * 70) - ((Math.random() * this.spread) - (this.spread / 2)), (this.y - Math.cos(this.r + 0.78534) * 70) - ((Math.random() * this.spread) - (this.spread / 2)), 10, 0, this.t, this.bulletS, this.bulletD, this.bulletP, this.knockback));
                                        bullets.push(new bullet(this.x + Math.sin(this.r - 0.78534) * 50, this.y - Math.cos(this.r - 0.78534) * 50, (this.x + Math.sin(this.r - 0.78534) * 70) - ((Math.random() * this.spread) - (this.spread / 2)), (this.y - Math.cos(this.r - 0.78534) * 70) - ((Math.random() * this.spread) - (this.spread / 2)), 10, 0, this.t, this.bulletS, this.bulletD, this.bulletP, this.knockback));
                                        this.reloading = true;
                                        this.bullet = 0;
                                        break;
                                }
                                break;

                            case 10:
                                switch(this.bullet) {
                                    case 0:
                                        bullets.push(new bullet(this.x + Math.sin(this.r) * 50, this.y - Math.cos(this.r) * 50, (this.x + Math.sin(this.r) * 70) - ((Math.random() * this.spread) - (this.spread / 2)), (this.y - Math.cos(this.r) * 70) - ((Math.random() * this.spread) - (this.spread / 2)), 10, 0, this.t, this.bulletS, this.bulletD, this.bulletP, this.knockback));
                                        bullets.push(new bullet(this.x + Math.sin(this.r + 3.1416) * 50, this.y - Math.cos(this.r + 3.1416) * 50, (this.x + Math.sin(this.r + 3.1416) * 70) - ((Math.random() * this.spread) - (this.spread / 2)), (this.y - Math.cos(this.r + 3.1416) * 70) - ((Math.random() * this.spread) - (this.spread / 2)), 10, 0, this.t, this.bulletS, this.bulletD, this.bulletP, this.knockback));
                                        this.reloading = true;
                                        this.bullet = 1;
                                        break;

                                    case 1:
                                        bullets.push(new bullet(this.x + Math.sin(this.r + 1.57) * 50, this.y - Math.cos(this.r + 1.57) * 50, (this.x + Math.sin(this.r + 1.57) * 70) - ((Math.random() * this.spread) - (this.spread / 2)), (this.y - Math.cos(this.r + 1.57) * 70) - ((Math.random() * this.spread) - (this.spread / 2)), 10, 0, this.t, this.bulletS, this.bulletD, this.bulletP, this.knockback));
                                        bullets.push(new bullet(this.x + Math.sin(this.r - 1.57) * 50, this.y - Math.cos(this.r - 1.57) * 50, (this.x + Math.sin(this.r - 1.57) * 70) - ((Math.random() * this.spread) - (this.spread / 2)), (this.y - Math.cos(this.r - 1.57) * 70) - ((Math.random() * this.spread) - (this.spread / 2)), 10, 0, this.t, this.bulletS, this.bulletD, this.bulletP, this.knockback));
                                        this.reloading = true;
                                        this.bullet = 0;
                                        break;
                                }
                            break;

                            case 11:
                                if(!this.bullet) {
	                                bullets.push(new bullet(this.x + Math.sin(this.r) * 50, this.y - Math.cos(this.r) * 50, (this.x + Math.sin(this.r) * 70) - ((Math.random() * this.spread) - (this.spread / 2)), (this.y - Math.cos(this.r) * 70) - ((Math.random() * this.spread) - (this.spread / 2)), 10, 0, this.t, this.bulletS, this.bulletD, this.bulletP, this.knockback));
                                    this.bullet = 1;
                                } else {
                                    bullets.push(new bullet(this.x + Math.sin(this.r - 0.29) * 50, this.y - Math.cos(this.r - 0.29) * 50, (this.x + Math.sin(this.r - 0.205) * 70) - ((Math.random() * this.spread) - (this.spread / 2)), (this.y - Math.cos(this.r - 0.205) * 70) - ((Math.random() * this.spread) - (this.spread / 2)), 10, 0, this.t, this.bulletS, this.bulletD, this.bulletP, this.knockback));
                                    bullets.push(new bullet(this.x + Math.sin(this.r + 0.29) * 50, this.y - Math.cos(this.r + 0.29) * 50, (this.x + Math.sin(this.r + 0.205) * 70) - ((Math.random() * this.spread) - (this.spread / 2)), (this.y - Math.cos(this.r + 0.205) * 70) - ((Math.random() * this.spread) - (this.spread / 2)), 10, 0, this.t, this.bulletS, this.bulletD, this.bulletP, this.knockback));
                                    this.bullet = 0;
                                }
                                this.reloading = true;

                                this.dx = Math.sin(this.r);
                                this.dy = -Math.cos(this.r);
                                this.mag = Math.sqrt(this.dx * this.dx + this.dy * this.dy);

                                this.velx -= ((this.dx / this.mag) * (this.knockback / 2));
                                this.vely -= ((this.dy / this.mag) * (this.knockback / 2));

                                break;

                            case 12:
                            switch(this.bullet) {
                                
                                case 0:
	                                bullets.push(new bullet(this.x + Math.sin(this.r) * 50, this.y - Math.cos(this.r) * 50, (this.x + Math.sin(this.r) * 70) - ((Math.random() * this.spread) - (this.spread / 2)), (this.y - Math.cos(this.r) * 70) - ((Math.random() * this.spread) - (this.spread / 2)), 10, 0, this.t, this.bulletS, this.bulletD, this.bulletP, this.knockback));
	                                bullets.push(new bullet(this.x + Math.sin(this.r + 3.1416) * 50, this.y - Math.cos(this.r + 3.1416) * 50, (this.x + Math.sin(this.r + 3.1416) * 70) - ((Math.random() * this.spread) - (this.spread / 2)), (this.y - Math.cos(this.r + 3.1416) * 70) - ((Math.random() * this.spread) - (this.spread / 2)), 10, 0, this.t, this.bulletS, this.bulletD, this.bulletP, this.knockback));
	                                bullets.push(new bullet(this.x + Math.sin(this.r + 1.57) * 50, this.y - Math.cos(this.r + 1.57) * 50, (this.x + Math.sin(this.r + 1.57) * 70) - ((Math.random() * this.spread) - (this.spread / 2)), (this.y - Math.cos(this.r + 1.57) * 70) - ((Math.random() * this.spread) - (this.spread / 2)), 10, 0, this.t, this.bulletS, this.bulletD, this.bulletP, this.knockback));
	                                bullets.push(new bullet(this.x + Math.sin(this.r - 1.57) * 50, this.y - Math.cos(this.r - 1.57) * 50, (this.x + Math.sin(this.r - 1.57) * 70) - ((Math.random() * this.spread) - (this.spread / 2)), (this.y - Math.cos(this.r - 1.57) * 70) - ((Math.random() * this.spread) - (this.spread / 2)), 10, 0, this.t, this.bulletS, this.bulletD, this.bulletP, this.knockback));
        	                        this.reloading = true;
                                    this.bullet = 1;
                                    break;

                                case 1:
	                                bullets.push(new bullet(this.x + Math.sin(this.r + 0.7854) * 50, this.y - Math.cos(this.r + 0.7854) * 50, (this.x + Math.sin(this.r + 0.7854) * 70) - ((Math.random() * this.spread) - (this.spread / 2)), (this.y - Math.cos(this.r + 0.7854) * 70) - ((Math.random() * this.spread) - (this.spread / 2)), 10, 0, this.t, this.bulletS, this.bulletD, this.bulletP, this.knockback));
	                                bullets.push(new bullet(this.x + Math.sin(this.r - 0.7854) * 50, this.y - Math.cos(this.r - 0.7854) * 50, (this.x + Math.sin(this.r - 0.7854) * 70) - ((Math.random() * this.spread) - (this.spread / 2)), (this.y - Math.cos(this.r - 0.7854) * 70) - ((Math.random() * this.spread) - (this.spread / 2)), 10, 0, this.t, this.bulletS, this.bulletD, this.bulletP, this.knockback));
	                                bullets.push(new bullet(this.x + Math.sin(this.r + 2.3562) * 50, this.y - Math.cos(this.r + 2.3562) * 50, (this.x + Math.sin(this.r + 2.3562) * 70) - ((Math.random() * this.spread) - (this.spread / 2)), (this.y - Math.cos(this.r + 2.3562) * 70) - ((Math.random() * this.spread) - (this.spread / 2)), 10, 0, this.t, this.bulletS, this.bulletD, this.bulletP, this.knockback));
	                                bullets.push(new bullet(this.x + Math.sin(this.r - 2.3562) * 50, this.y - Math.cos(this.r - 2.3562) * 50, (this.x + Math.sin(this.r - 2.3562) * 70) - ((Math.random() * this.spread) - (this.spread / 2)), (this.y - Math.cos(this.r - 2.3562) * 70) - ((Math.random() * this.spread) - (this.spread / 2)), 10, 0, this.t, this.bulletS, this.bulletD, this.bulletP, this.knockback));
        	                        this.reloading = true;
                                    this.bullet = 0;
                                    break;
                                }
                                break;

                            case 15:
                                if(!this.bullet) {
                                    bullets.push(new bullet(this.x + Math.sin(this.r + 0.29) * 50, this.y - Math.cos(this.r + 0.29) * 50, (this.x + Math.sin(this.r + 0.205) * 70) - ((Math.random() * this.spread) - (this.spread / 2)), (this.y - Math.cos(this.r + 0.205) * 70) - ((Math.random() * this.spread) - (this.spread / 2)), 10, 0, this.t, this.bulletS, this.bulletD, this.bulletP, this.knockback));
                                    bullets.push(new bullet(this.x + Math.sin(this.r + 2.385) * 50, this.y - Math.cos(this.r + 2.385) * 50, (this.x + Math.sin(this.r + 2.3) * 70) - ((Math.random() * this.spread) - (this.spread / 2)), (this.y - Math.cos(this.r + 2.3) * 70) - ((Math.random() * this.spread) - (this.spread / 2)), 10, 0, this.t, this.bulletS, this.bulletD, this.bulletP, this.knockback));
                                    bullets.push(new bullet(this.x + Math.sin(this.r - 1.805) * 50, this.y - Math.cos(this.r - 1.805) * 50, (this.x + Math.sin(this.r - 1.88) * 70) - ((Math.random() * this.spread) - (this.spread / 2)), (this.y - Math.cos(this.r - 1.88) * 70) - ((Math.random() * this.spread) - (this.spread / 2)), 10, 0, this.t, this.bulletS, this.bulletD, this.bulletP, this.knockback));
                                    this.bullet = 1;
                                } else {
                                    bullets.push(new bullet(this.x + Math.sin(this.r - 0.29) * 50, this.y - Math.cos(this.r - 0.29) * 50, (this.x + Math.sin(this.r - 0.205) * 70) - ((Math.random() * this.spread) - (this.spread / 2)), (this.y - Math.cos(this.r - 0.205) * 70) - ((Math.random() * this.spread) - (this.spread / 2)), 10, 0, this.t, this.bulletS, this.bulletD, this.bulletP, this.knockback));
                                    bullets.push(new bullet(this.x + Math.sin(this.r + 1.805) * 50, this.y - Math.cos(this.r + 1.805) * 50, (this.x + Math.sin(this.r + 1.88) * 70) - ((Math.random() * this.spread) - (this.spread / 2)), (this.y - Math.cos(this.r + 1.88) * 70) - ((Math.random() * this.spread) - (this.spread / 2)), 10, 0, this.t, this.bulletS, this.bulletD, this.bulletP, this.knockback));
                                    bullets.push(new bullet(this.x + Math.sin(this.r - 2.385) * 50, this.y - Math.cos(this.r - 2.385) * 50, (this.x + Math.sin(this.r - 2.3) * 70) - ((Math.random() * this.spread) - (this.spread / 2)), (this.y - Math.cos(this.r - 2.3) * 70) - ((Math.random() * this.spread) - (this.spread / 2)), 10, 0, this.t, this.bulletS, this.bulletD, this.bulletP, this.knockback));
                                    this.bullet = 0;
                                }
                                this.reloading = true;
                                break;

                            case 16:
                                if(this.dr < 8) {
                                    bullets.push(new bullet(this.x + Math.sin(this.r - 1.57) * 30, this.y - Math.cos(this.r - 1.57) * 30, mousex, mousey, 10, 1, this.t, this.bulletS, this.bulletD, this.bulletP, this.knockback));
                                    bullets.push(new bullet(this.x + Math.sin(this.r + 1.57) * 30, this.y - Math.cos(this.r + 1.57) * 30, mousex, mousey, 10, 1, this.t, this.bulletS, this.bulletD, this.bulletP, this.knockback));
                                    bullets.push(new bullet(this.x + Math.sin(this.r) * 30, this.y - Math.cos(this.r - 1.57) * 30, mousex, mousey, 10, 1, this.t, this.bulletS, this.bulletD, this.bulletP, this.knockback));
                                    bullets.push(new bullet(this.x + Math.sin(this.r + Math.PI) * 30, this.y - Math.cos(this.r + Math.PI) * 30, mousex, mousey, 10, 1, this.t, this.bulletS, this.bulletD, this.bulletP, this.knockback));
                                    this.dr += 4;
                                    this.reloading = true;
                                }
                                if(this.dr > 8) {
                                  
                                    this.dr -= this.dr - 7;
                                    bullets.length = 8;
                                  
                                }
                                break;
                            
                            case 17:
                            
                                bullets.push(new bullet(this.x + Math.sin(this.r) * 50, this.y - Math.cos(this.r) * 50, (this.x + Math.sin(this.r) * 70) - ((Math.random() * this.spread) - (this.spread / 2)), (this.y - Math.cos(this.r) * 70) - ((Math.random() * this.spread) - (this.spread / 2)), 0.8, 2, this.t, this.bulletS, this.bulletD * 1.5, this.bulletP * 1.5, this.knockback));
                                this.reloading = true;
                                break;
                            
                            case 18:
                            
                                bullets.push(new bullet(this.x + Math.sin(this.r) * 30, this.y - Math.cos(this.r) * 30, (this.x + Math.sin(this.r) * 70) - ((Math.random() * this.spread) - (this.spread / 2)), (this.y - Math.cos(this.r) * 70) - ((Math.random() * this.spread) - (this.spread / 2)), 0.5, 3, this.t, this.bulletS, this.bulletD, this.bulletP, this.knockback));
                                this.reloading = true;
                                break;
                            
                            case 19:
                            
                                bullets.push(new bullet(this.x + Math.sin(this.r) * 50, this.y - Math.cos(this.r) * 50, (this.x + Math.sin(this.r) * 70) - ((Math.random() * this.spread) - (this.spread / 2)), (this.y - Math.cos(this.r) * 70) - ((Math.random() * this.spread) - (this.spread / 2)), 1, 3, this.t, this.bulletS, this.bulletD * 2, this.bulletP * 2, this.knockback));
                                this.reloading = true;
                                break;
                            
                            case 20:
                            
                                bullets.push(new bullet(this.x + Math.sin(this.r) * 30, this.y - Math.cos(this.r) * 30, (this.x + Math.sin(this.r) * 70) - ((Math.random() * this.spread) - (this.spread / 2)), (this.y - Math.cos(this.r) * 70) - ((Math.random() * this.spread) - (this.spread / 2)), 0.5, 3, this.t, this.bulletS, this.bulletD, this.bulletP, this.knockback));
                                bullets.push(new bullet(this.x + Math.sin(this.r + 2.0944) * 30, this.y - Math.cos(this.r + 2.0944) * 30, (this.x + Math.sin(this.r + 2.0944) * 70) - ((Math.random() * this.spread) - (this.spread / 2)), (this.y - Math.cos(this.r + 2.0944) * 70) - ((Math.random() * this.spread) - (this.spread / 2)), 0.5, 3, this.t, this.bulletS, this.bulletD, this.bulletP, this.knockback));
                                bullets.push(new bullet(this.x + Math.sin(this.r - 2.0944) * 30, this.y - Math.cos(this.r - 2.0944) * 30, (this.x + Math.sin(this.r - 2.0944) * 70) - ((Math.random() * this.spread) - (this.spread / 2)), (this.y - Math.cos(this.r - 2.0944) * 70) - ((Math.random() * this.spread) - (this.spread / 2)), 0.5, 3, this.t, this.bulletS, this.bulletD, this.bulletP, this.knockback));
                                this.reloading = true;
                                break;
                            
                            case 21:
                            
                                bullets.push(new bullet(this.x + Math.sin(this.r) * 30, this.y - Math.cos(this.r) * 30, (this.x + Math.sin(this.r) * 70) - ((Math.random() * this.spread) - (this.spread / 2)), (this.y - Math.cos(this.r) * 70) - ((Math.random() * this.spread) - (this.spread / 2)), 20, 0, this.t, this.bulletS, this.bulletD * 1.1, this.bulletP * 1.1, this.knockback));

                                this.dx = Math.sin(this.r);
                                this.dy = Math.cos(this.r + 3.1416);
                                this.mag = Math.sqrt(this.dx * this.dx + this.dy * this.dy);

                                this.velx -= ((this.dx / this.mag) * (this.knockback * 2.3));
                                this.vely -= ((this.dy / this.mag) * (this.knockback * 2.3));
                            
                                this.reloading = true;
                                break;
                            
                            case 22:
                            
                                bullets.push(new bullet(this.x + Math.sin(this.r) * 30, this.y - Math.cos(this.r) * 30, (this.x + Math.sin(this.r) * 70) - ((Math.random() * this.spread) - (this.spread / 2)), (this.y - Math.cos(this.r) * 70) - ((Math.random() * this.spread) - (this.spread / 2)), 25, 0, this.t, this.bulletS, this.bulletD * 1.3, this.bulletP * 1.3, this.knockback));

                                this.dx = Math.sin(this.r);
                                this.dy = Math.cos(this.r + 3.1416);
                                this.mag = Math.sqrt(this.dx * this.dx + this.dy * this.dy);

                                this.velx -= ((this.dx / this.mag) * (this.knockback * 3));
                                this.vely -= ((this.dy / this.mag) * (this.knockback * 3));
                            
                                this.reloading = true;
                                break;
                            
                            case 23:
                                
                                if(this.bullet === 0) {
                                    bullets.push(new bullet(this.x + Math.sin(this.r - 0.12) * 50, this.y - Math.cos(this.r - 0.12) * 50, (this.x + Math.sin(this.r - 0.09) * 70) - ((Math.random() * this.spread) - (this.spread / 2)), (this.y - Math.cos(this.r - 0.09) * 70) - ((Math.random() * this.spread) - (this.spread / 2)), 5, 0, this.t, this.bulletS, this.bulletD * 0.7, this.bulletP * 0.7, this.knockback * 0.4));
                                    this.bullet = 1;
                                }else if(this.bullet === 1) {
                                    bullets.push(new bullet(this.x + Math.sin(this.r + 0.12) * 50, this.y - Math.cos(this.r + 0.12) * 50, (this.x + Math.sin(this.r + 0.09) * 70) - ((Math.random() * this.spread) - (this.spread / 2)), (this.y - Math.cos(this.r + 0.09) * 70) - ((Math.random() * this.spread) - (this.spread / 2)), 5, 0, this.t, this.bulletS, this.bulletD * 0.7, this.bulletP * 0.7, this.knockback * 0.4));
                                    this.bullet = 2;
                                }else if(this.bullet === 2) {
                                    bullets.push(new bullet(this.x + Math.sin(this.r - 0.5) * 40, this.y - Math.cos(this.r - 0.5) * 40, (this.x + Math.sin(this.r - 0.28) * 70) - ((Math.random() * this.spread) - (this.spread / 2)), (this.y - Math.cos(this.r - 0.28) * 70) - ((Math.random() * this.spread) - (this.spread / 2)), 5, 0, this.t, this.bulletS, this.bulletD * 0.7, this.bulletP * 0.7, this.knockback * 0.4));
                                    this.bullet = 3;
                                }else if(this.bullet === 3) {
                                    bullets.push(new bullet(this.x + Math.sin(this.r + 0.5) * 40, this.y - Math.cos(this.r + 0.5) * 40, (this.x + Math.sin(this.r + 0.28) * 70) - ((Math.random() * this.spread) - (this.spread / 2)), (this.y - Math.cos(this.r + 0.28) * 70) - ((Math.random() * this.spread) - (this.spread / 2)), 5, 0, this.t, this.bulletS, this.bulletD * 0.7, this.bulletP * 0.7, this.knockback * 0.4));
                                    this.bullet = 0;
                                }
                                this.reloading = true;
                                break;
                            
                            case 13:
                                switch(this.barrel) {
                                    case 0:
                                        bullets.push(new bullet(this.x + Math.sin(this.r) * 50, this.y - Math.cos(this.r) * 50, (this.x + Math.sin(this.r) * 70) - ((Math.random() * this.spread) - (this.spread / 2)), (this.y - Math.cos(this.r) * 70) - ((Math.random() * this.spread) - (this.spread / 2)), 2, 0, this.t, this.bulletS, (this.bulletD + this.bulletP) * 0.4, 0.7, this.knockback));
                                        this.barrel = 1;
                                        break;
                                    case 1:
                                        bullets.push(new bullet(this.x + Math.sin(this.r - 0.1) * 50, this.y - Math.cos(this.r - 0.1) * 50, (this.x + Math.sin(this.r - 0.1) * 70) - ((Math.random() * this.spread) - (this.spread / 2)), (this.y - Math.cos(this.r - 0.1) * 70) - ((Math.random() * this.spread) - (this.spread / 2)), 2, 0, this.t, this.bulletS, (this.bulletD + this.bulletP) * 0.4, 0.7, this.knockback));
                                        bullets.push(new bullet(this.x + Math.sin(this.r + 0.1) * 50, this.y - Math.cos(this.r + 0.1) * 50, (this.x + Math.sin(this.r + 0.1) * 70) - ((Math.random() * this.spread) - (this.spread / 2)), (this.y - Math.cos(this.r + 0.1) * 70) - ((Math.random() * this.spread) - (this.spread / 2)), 2, 0, this.t, this.bulletS, (this.bulletD + this.bulletP) * 0.4, 0.7, this.knockback));
                                        this.barrel = 2;
                                        break;
                                    case 2:
                                        bullets .push(new bullet(this.x + Math.sin(this.r - 0.25) * 50, this.y - Math.cos(this.r - 0.25) * 50, (this.x + Math.sin(this.r - 0.18) * 70) - ((Math.random() * this.spread) - (this.spread / 2)), (this.y - Math.cos(this.r - 0.18) * 70) - ((Math.random() * this.spread) - (this.spread / 2)), 2, 0, this.t, this.bulletS, (this.bulletD + this.bulletP) * 0.4, 0.7, this.knockback));
                                        bullets.push(new bullet(this.x + Math.sin(this.r + 0.25) * 50, this.y - Math.cos(this.r + 0.25) * 50, (this.x + Math.sin(this.r + 0.18) * 70) - ((Math.random() * this.spread) - (this.spread / 2)), (this.y - Math.cos(this.r + 0.18) * 70) - ((Math.random() * this.spread) - (this.spread / 2)), 2, 0, this.t, this.bulletS, (this.bulletD + this.bulletP) * 0.4, 0.7, this.knockback));
                                        this.barrel = 0;
                                        break;
                                }

                                break;

                        }

                        return;

                    }

                }

                if(this.reloading) {
                    this.cooldown -= 100;
                    this.timetill = millis;
                }

                if(this.cooldown <= 0) {
                    this.cooldown = 0;
                    this.reloading = false;
                }

                if(this.cooldown !== this.reload && !this.reloading) {

                    if(this.cooldown < this.reload) {
                        this.cooldown = millis - this.timetill;
                    } else {
                        this.cooldown = this.reload;
                    }

                }

                if(this.xp > xpamt[this.lvl]) {
                    this.xp -= xpamt[this.lvl];
                    this.xppoints++;
                    this.lvl++;
                }

                if(mouseUP) {
                    this.bullet = 0;
                }

            };

            this.show = function() {
                c.save();
                c.translate(this.x, this.y);
                c.scale(this.ss, this.ss);
                c.globalAlpha = this.a;

                if(this.H !== this.h) {
              
                    c.strokeStyle = "rgb(100, 100, 100, 0.8)";
                    c.lineWidth = 7;
                    c.beginPath();
                    c.moveTo(-25, 35);
                    c.lineTo(25, 35);
                    c.stroke();

                    c.strokeStyle = "rgb(100, 255, 100, 0.8)";
                    c.lineWidth = 4;
                    c.beginPath();
                    c.moveTo(-25, 35);
                    c.lineTo(((25 / this.H) * (this.h * 2)) - 25, 35);
                    c.stroke();

                }
                  
                c.lineWidth = 3;
              
                c.rotate(this.r);

                c.fillStyle = "rgb(200, 200, 200)";
                c.strokeStyle = "rgb(150, 150, 150)";
                tankshow[this.id]();
                switch(this.t) {
                    case 0:
                        c.fillStyle = "rgb(100, 200, 250)";
                        c.strokeStyle = "rgb(50, 150, 200)";
                        break;
                    case 1:
                        c.fillStyle = "rgb(250, 150, 150)";
                        c.strokeStyle = "rgb(200, 100, 100)";
                        break;
                    case 2:
                        c.fillStyle = "rgb(150, 250, 150)";
                        c.strokeStyle = "rgb(100, 200, 100)";
                        break;
                    case 3:
                        c.fillStyle = "rgb(250, 150, 250)";
                        c.strokeStyle = "rgb(200, 100, 200)";
                        break;
                }
                c.beginPath();
                c.arc(0, 0, 25, 0, 2 * Math.PI);
                c.fill();
                c.stroke();
              
                c.restore();
            };
        }
      
        function upgradeScreen() {

            canvas.style.cursor = "default";

            if(tanks[0].lvl >= 15 && tanks[0].id === 0) {

                for(var i = 0; i < tankorder[tanks[0].id].length; i++) {

                    switch(i) {

                        case 0:
                            c.lineWidth = 3;
                            c.fillStyle = "rgb(255, 100, 100)";
                            c.fillRect(20 + ((i % 2) * 120), 70 + ((Math.floor(i / 2) % 2) * 120), 100, 50);
                            c.fillStyle = "rgb(255, 50, 50)";
                            c.fillRect(20 + ((i % 2) * 120), 20 + ((Math.floor(i / 2) % 2) * 120), 100, 50);
                            break;

                        case 1:
                            c.lineWidth = 3;
                            c.fillStyle = "rgb(100, 100, 255)";
                            c.fillRect(20 + ((i % 2) * 120), 70 + ((Math.floor(i / 2) % 2) * 120), 100, 50);
                            c.fillStyle = "rgb(50, 50, 255)";
                            c.fillRect(20 + ((i % 2) * 120), 20 + ((Math.floor(i / 2) % 2) * 120), 100, 50);
                            break;

                        case 2:
                            c.lineWidth = 3;
                            c.fillStyle = "rgb(220, 220, 100)";
                            c.fillRect(20 + ((i % 2) * 120), 70 + ((Math.floor(i / 2) % 2) * 120), 100, 50);
                            c.fillStyle = "rgb(235, 235, 50)";
                            c.fillRect(20 + ((i % 2) * 120), 20 + ((Math.floor(i / 2) % 2) * 120), 100, 50);
                            break;

                        case 3:
                            c.lineWidth = 3;
                            c.fillStyle = "rgb(100, 255, 100)";
                            c.fillRect(20 + ((i % 2) * 120), 70 + ((Math.floor(i / 2) % 2) * 120), 100, 50);
                            c.fillStyle = "rgb(50, 255, 50)";
                            c.fillRect(20 + ((i % 2) * 120), 20 + ((Math.floor(i / 2) % 2) * 120), 100, 50);
                            break;

                    }

                    if(mousex > 20 + ((i % 2) * 120) && mousey > 20 + ((Math.floor(i / 2) % 2) * 120) && mousex < 120 + ((i % 2) * 120) && mousey < 120 + ((Math.floor(i / 2) % 2) * 120)) {

                        canvas.style.cursor = "pointer";

                        if(mouseUP) {

                            tanks[0].id = Number(tankorder[tanks[0].id][i]);

                            switch(tanks[0].id) {

                                case 1:

                                    tanks[0].knockback = tankstats.sniper.knockback;
                                    tanks[0].spread = tankstats.sniper.spread;
                                    tanks[0].BulletS = tankstats.sniper.bspeed;
                                    tanks[0].Reload = tankstats.sniper.reload;
                                    break;

                                case 2:

                                    tanks[0].knockback = tankstats.twin.knockback;
                                    tanks[0].spread = tankstats.twin.spread;
                                    tanks[0].BulletS = tankstats.twin.bspeed;
                                    tanks[0].Reload = tankstats.twin.reload;
                                    break;

                                case 3:

                                    tanks[0].knockback = tankstats.flankguard.knockback;
                                    tanks[0].spread = tankstats.flankguard.spread;
                                    tanks[0].BulletS = tankstats.flankguard.bspeed;
                                    tanks[0].Reload = tankstats.flankguard.reload;
                                    break;

                                case 4:

                                    tanks[0].knockback = tankstats.machinegun.knockback;
                                    tanks[0].spread = tankstats.machinegun.spread;
                                    tanks[0].BulletS = tankstats.machinegun.bspeed;
                                    tanks[0].Reload = tankstats.machinegun.reload;
                                    break;

                            }

                            return;

                        }

                    }

                    c.fillStyle = "rgb(200, 200, 200)";
                    c.strokeStyle = "rgb(150, 150, 150)";

                    c.strokeRect(20 + ((i % 2) * 120), 20 + ((Math.floor(i / 2) % 2) * 120), 100, 100);

                    c.save();
                    c.translate(70 + ((i % 2) * 120), 60 + ((Math.floor(i / 2) % 2) * 120));
                    c.scale(0.7, 0.7);
                    c.rotate((millis / 3000) % 360);

                    tankshow[tankorder[tanks[0].id][i]]();

                    c.fillStyle = "rgb(100, 200, 250)";
                    c.strokeStyle = "rgb(50, 150, 200)";

                    c.beginPath();
                    c.arc(0, 0, 25, 0, 2 * Math.PI);
                    c.fill();
                    c.stroke();

                    c.restore();

                    c.font = "bold 15px Ubuntu";
                    c.fillStyle = "white";
                    c.fillText(classes[tankorder[tanks[0].id][i]], 70 + ((i % 2) * 120), 105 + ((Math.floor(i / 2) % 2) * 120));
                    c.fillStyle = "black";
                    c.lineWidth = 1;
                    c.strokeText(classes[tankorder[tanks[0].id][i]], 70 + ((i % 2) * 120), 105 + ((Math.floor(i / 2) % 2) * 120));

                }

            } else if(tanks[0].lvl >= 30 && tanks[0].id < 5) {
              
                for(var i = 0; i < tankorder[tanks[0].id].length; i++) {

                    switch(i) {

                        case 0:
                            c.lineWidth = 3;
                            c.fillStyle = "rgb(255, 100, 100)";
                            c.fillRect(20 + ((i % 2) * 120), 70 + ((Math.floor(i / 2) % 2) * 120), 100, 50);
                            c.fillStyle = "rgb(255, 50, 50)";
                            c.fillRect(20 + ((i % 2) * 120), 20 + ((Math.floor(i / 2) % 2) * 120), 100, 50);
                            break;

                        case 1:
                            c.lineWidth = 3;
                            c.fillStyle = "rgb(100, 100, 255)";
                            c.fillRect(20 + ((i % 2) * 120), 70 + ((Math.floor(i / 2) % 2) * 120), 100, 50);
                            c.fillStyle = "rgb(50, 50, 255)";
                            c.fillRect(20 + ((i % 2) * 120), 20 + ((Math.floor(i / 2) % 2) * 120), 100, 50);
                            break;

                        case 2:
                            c.lineWidth = 3;
                            c.fillStyle = "rgb(220, 220, 100)";
                            c.fillRect(20 + ((i % 2) * 120), 70 + ((Math.floor(i / 2) % 2) * 120), 100, 50);
                            c.fillStyle = "rgb(235, 235, 50)";
                            c.fillRect(20 + ((i % 2) * 120), 20 + ((Math.floor(i / 2) % 2) * 120), 100, 50);
                            break;

                        case 3:
                            c.lineWidth = 3;
                            c.fillStyle = "rgb(100, 255, 100)";
                            c.fillRect(20 + ((i % 2) * 120), 70 + ((Math.floor(i / 2) % 2) * 120), 100, 50);
                            c.fillStyle = "rgb(50, 255, 50)";
                            c.fillRect(20 + ((i % 2) * 120), 20 + ((Math.floor(i / 2) % 2) * 120), 100, 50);
                            break;

                    }

                    if(mousex > 20 + ((i % 2) * 120) && mousey > 20 + ((Math.floor(i / 2) % 2) * 120) && mousex < 120 + ((i % 2) * 120) && mousey < 120 + ((Math.floor(i / 2) % 2) * 120)) {

                        canvas.style.cursor = "pointer";

                        if(mouseUP) {

                            tanks[0].id = Number(tankorder[tanks[0].id][i]);

                            switch(tanks[0].id) {

                                case 5:

                                    tanks[0].knockback = tankstats.assassin.knockback;
                                    tanks[0].spread = tankstats.assassin.spread;
                                    tanks[0].BulletS = tankstats.assassin.bspeed;
                                    tanks[0].Reload = tankstats.assassin.reload;
                                    break;

                                case 6:

                                    tanks[0].knockback = tankstats.overseer.knockback;
                                    tanks[0].spread = tankstats.overseer.spread;
                                    tanks[0].BulletS = tankstats.overseer.bspeed;
                                    tanks[0].Reload = tankstats.overseer.reload;
                                    break;

                                case 1:

                                    tanks[0].knockback = tankstats.predator.knockback;
                                    tanks[0].spread = tankstats.predator.spread;
                                    tanks[0].BulletS = tankstats.predator.bspeed;
                                    tanks[0].Reload = tankstats.predator.reload;
                                    break;

                                case 2:

                                    tanks[0].knockback = tankstats.machinegun.knockback;
                                    tanks[0].spread = tankstats.machinegun.spread;
                                    tanks[0].BulletS = tankstats.machinegun.bspeed;
                                    tanks[0].Reload = tankstats.machinegun.reload;
                                    break;
                                
                                case 18:

                                      tanks[0].knockback = tankstats.trapper.knockback;
                                      tanks[0].spread = tankstats.trapper.spread;
                                      tanks[0].BulletS = tankstats.trapper.bspeed;
                                      tanks[0].Reload = tankstats.trapper.reload;
                                      break;

                                case 21:

                                      tanks[0].knockback = tankstats.destroyer.knockback;
                                      tanks[0].spread = tankstats.destroyer.spread;
                                      tanks[0].BulletS = tankstats.destroyer.bspeed;
                                      tanks[0].Reload = tankstats.destroyer.reload;
                                      break;

                            }

                            return;

                        }

                    }

                    c.fillStyle = "rgb(200, 200, 200)";
                    c.strokeStyle = "rgb(150, 150, 150)";

                    c.strokeRect(20 + ((i % 2) * 120), 20 + ((Math.floor(i / 2) % 2) * 120), 100, 100);

                    c.save();
                    c.translate(70 + ((i % 2) * 120), 60 + ((Math.floor(i / 2) % 2) * 120));
                    c.scale(0.7, 0.7);
                    c.rotate((millis / 3000) % 360);

                    tankshow[tankorder[tanks[0].id][i]]();

                    c.fillStyle = "rgb(100, 200, 250)";
                    c.strokeStyle = "rgb(50, 150, 200)";

                    c.beginPath();
                    c.arc(0, 0, 25, 0, 2 * Math.PI);
                    c.fill();
                    c.stroke();

                    c.restore();

                    c.font = "bold 15px Ubuntu";
                    c.fillStyle = "white";
                    c.fillText(classes[tankorder[tanks[0].id][i]], 70 + ((i % 2) * 120), 105 + ((Math.floor(i / 2) % 2) * 120));
                    c.fillStyle = "black";
                    c.lineWidth = 1;
                    c.strokeText(classes[tankorder[tanks[0].id][i]], 70 + ((i % 2) * 120), 105 + ((Math.floor(i / 2) % 2) * 120));
                  
                }
              
            } else if(tanks[0].lvl >= 45 && (tanks[0].id < 17 || tanks[0].id === 18 || tanks[0].id === 21 || tanks[0].id === 23)) {
              
                for(var i = 0; i < tankorder[tanks[0].id].length; i++) {

                    switch(i) {

                        case 0:
                            c.lineWidth = 3;
                            c.fillStyle = "rgb(255, 100, 100)";
                            c.fillRect(20 + ((i % 2) * 120), 70 + ((Math.floor(i / 2) % 2) * 120), 100, 50);
                            c.fillStyle = "rgb(255, 50, 50)";
                            c.fillRect(20 + ((i % 2) * 120), 20 + ((Math.floor(i / 2) % 2) * 120), 100, 50);
                            break;

                        case 1:
                            c.lineWidth = 3;
                            c.fillStyle = "rgb(100, 100, 255)";
                            c.fillRect(20 + ((i % 2) * 120), 70 + ((Math.floor(i / 2) % 2) * 120), 100, 50);
                            c.fillStyle = "rgb(50, 50, 255)";
                            c.fillRect(20 + ((i % 2) * 120), 20 + ((Math.floor(i / 2) % 2) * 120), 100, 50);
                            break;

                        case 2:
                            c.lineWidth = 3;
                            c.fillStyle = "rgb(220, 220, 100)";
                            c.fillRect(20 + ((i % 2) * 120), 70 + ((Math.floor(i / 2) % 2) * 120), 100, 50);
                            c.fillStyle = "rgb(235, 235, 50)";
                            c.fillRect(20 + ((i % 2) * 120), 20 + ((Math.floor(i / 2) % 2) * 120), 100, 50);
                            break;

                        case 3:
                            c.lineWidth = 3;
                            c.fillStyle = "rgb(100, 255, 100)";
                            c.fillRect(20 + ((i % 2) * 120), 70 + ((Math.floor(i / 2) % 2) * 120), 100, 50);
                            c.fillStyle = "rgb(50, 255, 50)";
                            c.fillRect(20 + ((i % 2) * 120), 20 + ((Math.floor(i / 2) % 2) * 120), 100, 50);
                            break;

                    }

                    if(mousex > 20 + ((i % 2) * 120) && mousey > 20 + ((Math.floor(i / 2) % 2) * 120) && mousex < 120 + ((i % 2) * 120) && mousey < 120 + ((Math.floor(i / 2) % 2) * 120)) {

                        canvas.style.cursor = "pointer";

                        if(mouseUP) {

                            tanks[0].id = Number(tankorder[tanks[0].id][i]);

                            switch(tanks[0].id) {

                                case 17:
                                case 19:

                                      tanks[0].knockback = tankstats.landminer.knockback;
                                      tanks[0].spread = tankstats.landminer.spread;
                                      tanks[0].BulletS = tankstats.landminer.bspeed;
                                      tanks[0].Reload = tankstats.landminer.reload;
                                      break;
                                
                                case 22:

                                      tanks[0].knockback = tankstats.annihilator.knockback;
                                      tanks[0].spread = tankstats.annihilator.spread;
                                      tanks[0].BulletS = tankstats.annihilator.bspeed;
                                      tanks[0].Reload = tankstats.annihilator.reload;
                                      break;
                                
                                case 13:

                                      tanks[0].knockback = tankstats.flamethrower.knockback;
                                      tanks[0].spread = tankstats.flamethrower.spread;
                                      tanks[0].BulletS = tankstats.flamethrower.bspeed;
                                      tanks[0].Reload = tankstats.flamethrower.reload;
                                      break;

                            }

                            return;

                        }

                    }

                    c.fillStyle = "rgb(200, 200, 200)";
                    c.strokeStyle = "rgb(150, 150, 150)";

                    c.strokeRect(20 + ((i % 2) * 120), 20 + ((Math.floor(i / 2) % 2) * 120), 100, 100);

                    c.save();
                    c.translate(70 + ((i % 2) * 120), 60 + ((Math.floor(i / 2) % 2) * 120));
                    c.scale(0.7, 0.7);
                    c.rotate((millis / 3000) % 360);

                    tankshow[tankorder[tanks[0].id][i]]();
                  
                    c.fillStyle = "rgb(100, 200, 250)";
                    c.strokeStyle = "rgb(50, 150, 200)";

                    c.beginPath();
                    c.arc(0, 0, 25, 0, 2 * Math.PI);
                    c.fill();
                    c.stroke();

                    c.restore();

                    c.font = "bold 15px Ubuntu";
                    c.fillStyle = "white";
                    c.fillText(classes[tankorder[tanks[0].id][i]], 70 + ((i % 2) * 120), 105 + ((Math.floor(i / 2) % 2) * 120));
                    c.fillStyle = "black";
                    c.lineWidth = 1;
                    c.strokeText(classes[tankorder[tanks[0].id][i]], 70 + ((i % 2) * 120), 105 + ((Math.floor(i / 2) % 2) * 120));
                  
                }
              
            }
          
        }

        function draw() {

            millis = new Date();
            millis = millis.getTime();
            if(start === 0) {
                start = millis;
            }

            if(s === "Menu") {
                c.clearRect(0, 0, canvas.width, canvas.height);
                c.drawImage(bgimg, (canvas.width / 2) - (bgimg.width / 2), (canvas.height / 2) - (bgimg.height / 2));
                if(input.style.opacity < 1) {
                    op = millis - start;
                    input.style.opacity = op / 1000;
                    input.style.border = "5px solid black";
                    input.style.left = ((canvas.width / 2) - (input.size * 5)) + "px";
                    input.style.top = ((canvas.height / 3) + (50 * Math.sin((op / 13) / 50))) + "px";

                }
              
            } else if(s === "FFA") {

                if(autospin) {
                    mousex = (canvas.width / 2) + Math.sin(millis / 1500) * 200;
                    mousey = (canvas.height / 2) + Math.cos(millis / 1500) * 200;
                }

                camx = (canvas.width / 2) - tanks[0].x;
                camy = (canvas.height / 2) - tanks[0].y;

                c.strokeStyle = "rgb(180, 180, 180)";
                c.lineWidth = 1;

                c.fillStyle = "rgb(200, 200, 200)";
                c.fillRect(0, 0, canvas.width, canvas.height);

                c.save();
                c.translate(camx, camy);

                c.fillStyle = "rgb(220, 220, 220, 1)";
                c.fillRect(-1500, -1500, 3000, 3000);

                c.resetTransform();

                for(var i = 0; i < canvas.width / 10; i++) {
                    c.beginPath();
                    c.moveTo(0, (i * 25) - tanks[0].y % 25);
                    c.lineTo(canvas.width, (i * 25) - tanks[0].y % 25);
                    c.stroke();
                    c.beginPath();
                    c.moveTo((i * 25) - tanks[0].x % 25, 0);
                    c.lineTo((i * 25) - tanks[0].x % 25, canvas.height);
                    c.stroke();
                }
                c.translate(camx, camy);

                c.lineWidth = 3;

                for(var i = shapes.length - 1; i >= 0; i--) {

                    shapes[i].show();
                    shapes[i].update();

                    for(var j = shapes.length - 1; j >= 0; j--) {

                        if(i !== j) {

                            if(Math.abs(shapes[i].x - shapes[j].x) < 50 && Math.abs(shapes[i].y - shapes[j].y) < 50) {

                                shapes[i].gothit(shapes[j]);
                                shapes[j].gothit(shapes[i]);

                            }

                        }

                    }

                    for(var j = bullets.length - 1; j >= 0; j--) {

                        if(Math.abs(shapes[i].x - bullets[j].x) < 18 + bullets[j].r && Math.abs(shapes[i].y - bullets[j].y) < 18 + bullets[j].r) {

                            shapes[i].gothit(bullets[j]);

                        }

                    }

                    for(var j = tanks.length - 1; j >= 0; j--) {

                        if(Math.abs(shapes[i].x - tanks[j].x) < 35 && Math.abs(shapes[i].y - tanks[j].y) < 35) {

                            shapes[i].gothit(tanks[j]);
                            tanks[j].h--;

                        }
                    }

                    if(shapes[i].a <= 0) {

                        tanks[0].showxp += shapes[i].xp;
                        shapes.splice(i, 1);
                        shapes.push(new shape(Math.round(Math.random() * 3000) - 1500, Math.round(Math.random() * 3000) - 1500, Math.round(Math.random() * 2)));

                    }

                }
              
                for(var i = bullets.length - 1; i >= 0; i--) {

                    bullets[i].show();
                    bullets[i].update();
                  
                    for(var j = bullets.length - 1; j >= 0; j--) {
                      
                        if(i !== j) {
                          
                            if(Math.abs(bullets[i].x - bullets[j].x) < 10 && Math.abs(bullets[i].y - bullets[j].y) < 10 && bullets[i].id === 1 && bullets[j].id === 1) {
                                
                                var pr = Math.atan2(-(bullets[i].x - bullets[j].x), bullets[i].y - bullets[j].y);
                                bullets[i].x -= Math.sin(pr);
                                bullets[i].y -= Math.cos(pr + 3.1416);
                                bullets[j].x += Math.sin(pr);
                                bullets[j].y += Math.cos(pr + 3.1416);
                              
                            }
                          
                            if(Math.abs(bullets[i].x - bullets[j].x) < 15 && Math.abs(bullets[i].y - bullets[j].y) < 15 && ((bullets[i].id === 2 && bullets[j].id === 2) || (bullets[i].id === 3 && bullets[j].id === 3)) && bullets[i].p > 1 && bullets[j].p > 4) {
                              
                                bullets[i].ms *= 0.8;
                                bullets[j].ms *= 0.8;
                                
                                var pr = Math.atan2(-(bullets[i].x - bullets[j].x), bullets[i].y - bullets[j].y);
                                bullets[i].x -= Math.sin(pr);
                                bullets[i].y -= Math.cos(pr + 3.1416);
                                bullets[j].x += Math.sin(pr);
                                bullets[j].y += Math.cos(pr + 3.1416);
                              
                            }
                          
                        }
                      
                    }

                    if(bullets[i].a <= 0) {
                        if(bullets[i].id === 2) {
                            bullets.push(new bullet(bullets[i].x, bullets[i].y, bullets[i].x + Math.sin(0), bullets[i].y - Math.cos(0), 3, 0, bullets[i].t, 2, bullets[i].d / 3, 0.5, 1));
                            bullets.push(new bullet(bullets[i].x, bullets[i].y, bullets[i].x + Math.sin(Math.PI), bullets[i].y - Math.cos(Math.PI), 3, 0, bullets[i].t, 2, bullets[i].d, 0.5, 1));
                            bullets.push(new bullet(bullets[i].x, bullets[i].y, bullets[i].x + Math.sin(0.5236), bullets[i].y - Math.cos(0.5236), 3, 0, bullets[i].t, 2, bullets[i].d, 0.5, 1));
                            bullets.push(new bullet(bullets[i].x, bullets[i].y, bullets[i].x + Math.sin(-0.5236), bullets[i].y - Math.cos(-0.5236), 3, 0, bullets[i].t, 2, bullets[i].d, 0.5, 1));
                            bullets.push(new bullet(bullets[i].x, bullets[i].y, bullets[i].x + Math.sin(1.0472), bullets[i].y - Math.cos(1.0472), 3, 0, bullets[i].t, 2, bullets[i].d, 0.5, 1));
                            bullets.push(new bullet(bullets[i].x, bullets[i].y, bullets[i].x + Math.sin(-1.0472), bullets[i].y - Math.cos(-1.0472), 3, 0, bullets[i].t, 2, bullets[i].d, 0.5, 1));
                            bullets.push(new bullet(bullets[i].x, bullets[i].y, bullets[i].x + Math.sin(1.5708), bullets[i].y - Math.cos(1.5708), 3, 0, bullets[i].t, 2, bullets[i].d, 0.5, 1));
                            bullets.push(new bullet(bullets[i].x, bullets[i].y, bullets[i].x + Math.sin(-1.5708), bullets[i].y - Math.cos(-1.5708), 3, 0, bullets[i].t, 2, bullets[i].d, 0.5, 1));
                            bullets.push(new bullet(bullets[i].x, bullets[i].y, bullets[i].x + Math.sin(2.0944), bullets[i].y - Math.cos(2.0944), 3, 0, bullets[i].t, 2, bullets[i].d, 0.5, 1));
                            bullets.push(new bullet(bullets[i].x, bullets[i].y, bullets[i].x + Math.sin(-2.0944), bullets[i].y - Math.cos(-2.0944), 3, 0, bullets[i].t, 2, bullets[i].d, 0.5, 1));
                            bullets.push(new bullet(bullets[i].x, bullets[i].y, bullets[i].x + Math.sin(2.618), bullets[i].y - Math.cos(2.618), 3, 0, bullets[i].t, 2, bullets[i].d, 0.5, 1));
                            bullets.push(new bullet(bullets[i].x, bullets[i].y, bullets[i].x + Math.sin(-2.618), bullets[i].y - Math.cos(-2.618), 3, 0, bullets[i].t, 2, bullets[i].d, 0.5, 1));
                            bullets.push(new bullet(bullets[i].x, bullets[i].y, bullets[i].x + Math.sin(4.1888), bullets[i].y - Math.cos(4.1888), 3, 0, bullets[i].t, 2, bullets[i].d, 0.5, 1));
                            bullets.push(new bullet(bullets[i].x, bullets[i].y, bullets[i].x + Math.sin(-4.1888), bullets[i].y - Math.cos(-4.1888), 3, 0, bullets[i].t, 2, bullets[i].d, 0.5, 1));
                        }
                        if(bullets[i].id === 1) {
                          
                            tanks[0].dr--;
                          
                        }
                        bullets.splice(i, 1);
                    }
                }

                for(var i = tanks.length - 1; i >= 0; i--) {
                    tanks[i].show();
                    if(i !== 0) {
                        c.fillStyle = "white";
                        c.strokeStyle = "black";
                        c.lineWidth = "1";
                        c.font = "bold 15px Ubuntu";
                        c.fillText(tanks[i].n, tanks[i].x, tanks[i].y - 50);
                        c.strokeText(tanks[i].n, tanks[i].x, tanks[i].y - 50);
                    }
                }
                tanks[0].update(Math.atan2(-(tanks[0].x - (mousex - camx)), (tanks[0].y - (mousey - camy))));

                c.restore();

                c.lineWidth = 20;
                c.strokeStyle = "rgba(50, 50, 50, 0.8)";
                c.beginPath();
                c.lineTo((canvas.width / 2) - 250, canvas.height - 25);
                c.lineTo((canvas.width / 2) + 250, canvas.height - 25);
                c.stroke();

                tanks[0].xp += tanks[0].showxp / 5;
                tanks[0].showxp /= 5;

                c.lineWidth = 14;
                c.strokeStyle = "rgb(250, 250, 150)";
                c.beginPath();
                c.lineTo((canvas.width / 2) - 250, canvas.height - 25);
                c.lineTo(((canvas.width / 2) - 250) + (tanks[0].xp * (((canvas.width / 2) + 250) / (xpamt[tanks[0].lvl] * 1.199))), canvas.height - 25);
                c.stroke();

                c.fillStyle = "white";
                c.strokeStyle = "black";
                c.textAlign = "center";
                c.textBaseline = "middle";
                c.font = "bold 15px Ubuntu";
                c.lineWidth = 1;
                c.fillText("Level " + tanks[0].lvl + " " + classes[tanks[0].id], canvas.width / 2, canvas.height - 25);
                c.font = "bold 25px Ubuntu";
                c.fillText(tanks[0].n, canvas.width / 2, canvas.height - 50);
                c.strokeText(tanks[0].n, canvas.width / 2, canvas.height - 50);

                upgradeScreen();

                if(tanks[0].xppoints > 0) {

                    for(var i = 0; i < 8; i++) {

                        c.strokeStyle = "rgb(50, 50, 50, 0.8)";
                        c.lineWidth = 16;
                        c.beginPath();
                        c.moveTo(20, canvas.height - (20 + (i * 23)));
                        c.lineTo(200, canvas.height - (20 + (i * 23)));
                        c.stroke();

                        if(mmousex > 175 && mmousex < 210 && mmousey > canvas.height - (30 + (i * 23)) && mmousey < canvas.height - (10 + (i * 23))) {

                            canvas.style.cursor = "pointer";

                            if(mouseClicked) {

                                switch(i) {

                                    case 0:
                                        if(tanks[0].movementspeedpoints < 8) {
                                            tanks[0].movementspeedpoints++;
                                            tanks[0].xppoints--;
                                            mouseClicked = false;
                                        }
                                        break;

                                    case 1:
                                        if(tanks[0].reloadpoints < 8) {
                                            tanks[0].reloadpoints++;
                                            tanks[0].xppoints--;
                                            mouseClicked = false;
                                        }
                                        break;

                                    case 2:
                                        if(tanks[0].bulletPpoints < 8) {
                                            tanks[0].bulletPpoints++;
                                            tanks[0].xppoints--;
                                            mouseClicked = false;
                                        }
                                        break;

                                    case 3:
                                        if(tanks[0].bulletDpoints < 8) {
                                            tanks[0].bulletDpoints++;
                                            tanks[0].xppoints--;
                                            mouseClicked = false;
                                        }
                                        break;

                                    case 4:
                                        if(tanks[0].bulletSpoints < 8) {
                                            tanks[0].bulletSpoints++;
                                            tanks[0].xppoints--;
                                            mouseClicked = false;
                                        }
                                        break;

                                    case 5:
                                        if(tanks[0].bodydamagepoints < 8) {
                                            tanks[0].bodydamagepoints++;
                                            tanks[0].xppoints--;
                                            mouseClicked = false;
                                        }
                                        break;

                                    case 6:
                                        if(tanks[0].regenpoints < 8) {
                                            tanks[0].regenpoints++;
                                            tanks[0].xppoints--;
                                            mouseClicked = false;
                                        }
                                        break;

                                    case 7:
                                        if(tanks[0].healthpoints < 8) {
                                            tanks[0].healthpoints++;
                                            tanks[0].xppoints--;
                                            mouseClicked = false;
                                        }
                                        break;

                                }

                            }

                        }

                    }

                    for(var i = 0; i < tanks[0].healthpoints; i++) {
                        c.fillStyle = "rgb(250, 175, 100)";
                        if(i === 0) {
                            c.beginPath();
                            c.arc(21, canvas.height - 181, 7, 0, 2 * Math.PI);
                            c.fill();
                        }
                        c.fillRect(23 + (19 * i), canvas.height - 188, 17, 14);
                    }
                    c.fillStyle = "rgb(100, 100, 100)";
                    if(tanks[0].healthpoints < 8) {
                        c.fillStyle = "rgb(250, 175, 100)";
                    }
                    c.beginPath();
                    c.arc(200, canvas.height - 181, 8, 0, 2 * Math.PI);
                    c.rect(175, canvas.height - 189, 25, 16);
                    c.fill();

                    for(var i = 0; i < tanks[0].regenpoints; i++) {
                        c.fillStyle = "rgb(250, 250, 100)";
                        if(i === 0) {
                            c.beginPath();
                            c.arc(21, canvas.height - 158, 7, 0, 2 * Math.PI);
                            c.fill();
                        }
                        c.fillRect(23 + (19 * i), canvas.height - 165, 17, 14);
                    }
                    c.fillStyle = "rgb(100, 100, 100)";
                    if(tanks[0].regenpoints < 8) {
                        c.fillStyle = "rgb(250, 250, 100)";
                    }
                    c.beginPath();
                    c.arc(200, canvas.height - 158, 8, 0, 2 * Math.PI);
                    c.rect(175, canvas.height - 166, 25, 16);
                    c.fill();

                    for(var i = 0; i < tanks[0].bodydamagepoints; i++) {
                        c.fillStyle = "rgb(175, 100, 250)";
                        if(i === 0) {
                            c.beginPath();
                            c.arc(21, canvas.height - 135, 7, 0, 2 * Math.PI);
                            c.fill();
                        }
                        c.fillRect(23 + (19 * i), canvas.height - 142, 17, 14);
                    }
                    c.fillStyle = "rgb(100, 100, 100)";
                    if(tanks[0].bodydamagepoints < 8) {
                        c.fillStyle = "rgb(175, 100, 250)";
                    }
                    c.beginPath();
                    c.arc(200, canvas.height - 135, 8, 0, 2 * Math.PI);
                    c.rect(175, canvas.height - 143, 25, 16);
                    c.fill();

                    for(var i = 0; i < tanks[0].bulletSpoints; i++) {
                        c.fillStyle = "rgb(100, 175, 250)";
                        if(i === 0) {
                            c.beginPath();
                            c.arc(21, canvas.height - 112, 7, 0, 2 * Math.PI);
                            c.fill();
                        }
                        c.fillRect(23 + (19 * i), canvas.height - 119, 17, 14);
                    }
                    c.fillStyle = "rgb(100, 100, 100)";
                    if(tanks[0].bulletSpoints < 8) {
                        c.fillStyle = "rgb(100, 175, 250)";
                    }
                    c.beginPath();
                    c.arc(200, canvas.height - 112, 8, 0, 2 * Math.PI);
                    c.rect(175, canvas.height - 120, 25, 16);
                    c.fill();

                    for(var i = 0; i < tanks[0].bulletDpoints; i++) {
                        c.fillStyle = "rgb(250, 100, 100)";
                        if(i === 0) {
                            c.beginPath();
                            c.arc(21, canvas.height - 89, 7, 0, 2 * Math.PI);
                            c.fill();
                        }
                        c.fillRect(23 + (19 * i), canvas.height - 96, 17, 14);
                    }
                    c.fillStyle = "rgb(100, 100, 100)";
                    if(tanks[0].bulletDpoints < 8) {
                        c.fillStyle = "rgb(250, 100, 100)";
                    }
                    c.beginPath();
                    c.arc(200, canvas.height - 89, 8, 0, 2 * Math.PI);
                    c.rect(175, canvas.height - 97, 25, 16);
                    c.fill();

                    for(var i = 0; i < tanks[0].bulletPpoints; i++) {
                        c.fillStyle = "rgb(250, 250, 100)";
                        if(i === 0) {
                            c.beginPath();
                            c.arc(21, canvas.height - 66, 7, 0, 2 * Math.PI);
                            c.fill();
                        }
                        c.fillRect(23 + (19 * i), canvas.height - 73, 17, 14);
                    }
                    c.fillStyle = "rgb(100, 100, 100)";
                    if(tanks[0].bulletPpoints < 8) {
                        c.fillStyle = "rgb(250, 175, 100)";
                    }
                    c.beginPath();
                    c.arc(200, canvas.height - 66, 8, 0, 2 * Math.PI);
                    c.rect(175, canvas.height - 74, 25, 16);
                    c.fill();

                    for(var i = 0; i < tanks[0].reloadpoints; i++) {
                        c.fillStyle = "rgb(100, 250, 100)";
                        if(i === 0) {
                            c.beginPath();
                            c.arc(21, canvas.height - 43, 7, 0, 2 * Math.PI);
                            c.fill();
                        }
                        c.fillRect(23 + (19 * i), canvas.height - 50, 17, 14);
                    }
                    c.fillStyle = "rgb(100, 100, 100)";
                    if(tanks[0].reloadpoints < 8) {
                        c.fillStyle = "rgb(100, 250, 100)";
                    }
                    c.beginPath();
                    c.arc(200, canvas.height - 43, 8, 0, 2 * Math.PI);
                    c.rect(175, canvas.height - 51, 25, 16);
                    c.fill();

                    for(var i = 0; i < tanks[0].movementspeedpoints; i++) {
                        c.fillStyle = "rgb(100, 250, 250)";
                        if(i === 0) {
                            c.beginPath();
                            c.arc(21, canvas.height - 20, 7, 0, 2 * Math.PI);
                            c.fill();
                        }
                        c.fillRect(23 + (19 * i), canvas.height - 27, 17, 14);
                    }
                    c.fillStyle = "rgb(100, 100, 100)";
                    if(tanks[0].movementspeedpoints < 8) {
                        c.fillStyle = "rgb(100, 250, 250)";
                    }
                    c.beginPath();
                    c.arc(200, canvas.height - 20, 8, 0, 2 * Math.PI);
                    c.rect(175, canvas.height - 28, 25, 16);
                    c.fill();

                    c.fillStyle = "white";
                    c.fillText("+", 190, canvas.height - 181);
                    c.fillText("+", 190, canvas.height - 158);
                    c.fillText("+", 190, canvas.height - 135);
                    c.fillText("+", 190, canvas.height - 112);
                    c.fillText("+", 190, canvas.height - 89);
                    c.fillText("+", 190, canvas.height - 66);
                    c.fillText("+", 190, canvas.height - 43);
                    c.fillText("+", 190, canvas.height - 20);

                    c.strokeStyle = "black";
                    c.lineWidth = 1;
                    c.strokeText("+", 190, canvas.height - 181);
                    c.strokeText("+", 190, canvas.height - 158);
                    c.strokeText("+", 190, canvas.height - 135);
                    c.strokeText("+", 190, canvas.height - 112);
                    c.strokeText("+", 190, canvas.height - 89);
                    c.strokeText("+", 190, canvas.height - 66);
                    c.strokeText("+", 190, canvas.height - 43);
                    c.strokeText("+", 190, canvas.height - 20);

                    c.font = "bold 10px Ubuntu";
                    c.fillText("Max Health [1]", 100, canvas.height - 181);
                    c.fillText("Health Regen [2]", 100, canvas.height - 158);
                    c.fillText("Body Damage [3]", 100, canvas.height - 135);
                    c.fillText("Bullet Speed [4]", 100, canvas.height - 112);
                    c.fillText("Bullet Damage [5]", 100, canvas.height - 89);
                    c.fillText("Bullet Penetration [6]", 100, canvas.height - 66);
                    c.fillText("Reload [7]", 100, canvas.height - 43);
                    c.fillText("Movement Speed [8]", 100, canvas.height - 20);
                    c.lineWidth = 0.2;
                    c.strokeText("Max Health [1]", 100, canvas.height - 181);
                    c.strokeText("Health Regen [2]", 100, canvas.height - 158);
                    c.strokeText("Body Damage [3]", 100, canvas.height - 135);
                    c.strokeText("Bullet Speed [4]", 100, canvas.height - 112);
                    c.strokeText("Bullet Damage [5]", 100, canvas.height - 89);
                    c.strokeText("Bullet Penetration [6]", 100, canvas.height - 66);
                    c.strokeText("Reload [7]", 100, canvas.height - 43);
                    c.strokeText("Movement Speed [8]", 100, canvas.height - 20);

                    c.save();
                    c.translate(210, canvas.height - 200);
                    c.rotate(0.3);
                    c.font = "bold 20px Ubuntu";
                    c.lineWidth = 1;
                    c.fillText("x" + tanks[0].xppoints, 0, 0);
                    c.strokeText("x" + tanks[0].xppoints, 0, 0);
                    c.restore();

                }

                var d = {
                    "x": tanks[0].x,
                    "y": tanks[0].y,
                    "r": tanks[0].r,
                    "id": tanks[0].id,
                    "name": tanks[0].n
                };
                f.child(tanks[0].userID).set(d);
              
                if(tanks[0].dead) {
                    returnMenu();
                }

            }

          	mouseUP = false;
            requestAnimationFrame(draw);

        }

        var f = firebase.database().ref();
        var query = firebase.database().ref().orderByKey();
            query.once("value")
                .then(function(snapshot) {
                    snapshot.forEach(function(childSnapshot) {
                        var key = childSnapshot.key;
                        var m = 0;
                        var mm = firebase.database().ref();
                        mm.on("value", function(c) {
                            c.forEach(function(cc) {
                                for(var i = 0; i < tanks.length; i++) {
                                    if(tanks[i].userID === Number(cc.key)) {
                                        m = i;
                                    }

                                }
                                cc.forEach(function(data) {
                                    tanks[m][data.key] = data.val();
                                });
                            });
                        });
                        mm.on("child_removed", function(child) {
                          
                            for(var i = 0; i < tanks.length; i++) {
                              
                                if(tanks[i].userID === Number(child.key)){
                                  
                                    tanks.splice(i, 1);
                                    return;
                                  
                                }
                              
                            }
                          
                        })
                        mm.on("child_added", function(child) {
                            tanks.push(new tank(Number(child.x), Number(child.y), Number(child.r), 0, child.name, 0, 0, 1, Number(child.key)));
                            return;
                        })
                    });
                });

        window.addEventListener("mousemove", function(e) {
            if(!autospin) {
                mousex = e.clientX;
                mousey = e.clientY;
            }
        });
        window.addEventListener("mousedown", function(e) {
            mouseIsPressed = true;
            if(canClick) {
                mouseClicked = true;
                canClick = false;
                setTimeout(function() {
                    mouseClicked = false;
                }, 1);
            }
        });
        window.addEventListener("mouseup", function() {
            mouseIsPressed = false;
            mouseUP = true;
            canClick = true;
        });
        window.addEventListener("keydown", function(e) {
            keys[e.keyCode] = true;
        });
        window.addEventListener("beforeunload", function(e) {
            e.returnValue = "true";
        });
        window.addEventListener("onunload", function() {
	    if(s === "FFA") {
	        firebase.database().ref(tanks[0].userID).remove();
	    }
        });
        window.addEventListener("resize", function() {
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;
        });
        window.addEventListener("keyup", function(e) {
            e.preventDefault();
            if(keys[13] && s === "Menu") {
              
                playGame();
              
            }
            if(keys[69]) {
                if(!autofire) autofire = true;
                else autofire = false;
            }
            if(keys[67]) {
                if(!autospin) autospin = true;
                else autospin = false;
            }
            if(keys[79]) {
              tanks[0].dead = true;
            }/*
            if(keys[9]) {
                gamemode = gamemode + 1 % gamemodes.length;
                if(gamemodes[gamemode] === "FFA") {
                    firebase.initializeApp(configFFA);
                }
                if(gamemodes[gamemode] === "Teams") {
                    firebase.initializeApp(configTeams);
                }
            }*/
            if(keys[49]) {
              
                if(tanks[0].xppoints > 0 && tanks[0].healthpoints < 8) {
                  
                    tanks[0].xppoints--;
                    tanks[0].healthpoints++;
                  
                }
              
            }
            if(keys[50]) {
              
                if(tanks[0].xppoints > 0 && tanks[0].regenpoints < 8) {
                  
                    tanks[0].xppoints--;
                    tanks[0].regenpoints++;
                  
                }
              
            }
            if(keys[51]) {
              
                if(tanks[0].xppoints > 0 && tanks[0].bodydamagepoints < 8) {
                  
                    tanks[0].xppoints--;
                    tanks[0].bodydamagepoints++;
                  
                }
              
            }
            if(keys[52]) {
              
                if(tanks[0].xppoints > 0 && tanks[0].bulletSpoints < 8) {
                  
                    tanks[0].xppoints--;
                    tanks[0].bulletSpoints++;
                  
                }
              
            }
            if(keys[53]) {
              
                if(tanks[0].xppoints > 0 && tanks[0].bulletDpoints < 8) {
                  
                    tanks[0].xppoints--;
                    tanks[0].bulletDpoints++;
                  
                }
              
            }
            if(keys[54]) {
              
                if(tanks[0].xppoints > 0 && tanks[0].bulletPpoints < 8) {
                  
                    tanks[0].xppoints--;
                    tanks[0].bulletPpoints++;
                  
                }
              
            }
            if(keys[55]) {
              
                if(tanks[0].xppoints > 0 && tanks[0].reloadpoints < 8) {
                  
                    tanks[0].xppoints--;
                    tanks[0].reloadpoints++;
                  
                }
              
            }
            if(keys[56]) {
              
                if(tanks[0].xppoints > 0 && tanks[0].movementspeedpoints < 8) {
                  
                    tanks[0].xppoints--;
                    tanks[0].movementspeedpoints++;
                  
                }
              
            }
            keys[e.keyCode] = false;
        });

        if (document.addEventListener) {
            document.addEventListener('contextmenu', function(e) {
                e.preventDefault();
            }, false);
        } else {
            document.attachEvent('oncontextmenu', function() {
                window.event.returnValue = false;
            });
        }
  </script>
</body>

</html>
